<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><title>Docker学习大纲 | </title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.5927a741.js"><link rel="modulepreload" href="/assets/docker.html.57732b8b.js"><link rel="modulepreload" href="/assets/docker.html.3df04322.js"><link rel="prefetch" href="/assets/index.html.2c3903ba.js"><link rel="prefetch" href="/assets/deploy.html.0b6c80ae.js"><link rel="prefetch" href="/assets/linux-install-projects.html.e3b0d4eb.js"><link rel="prefetch" href="/assets/linux.html.7b856ea4.js"><link rel="prefetch" href="/assets/dubbo.html.98c6c4ce.js"><link rel="prefetch" href="/assets/SpringCloud.html.e737528c.js"><link rel="prefetch" href="/assets/SpringCloudAlibaba.html.81d1bcce.js"><link rel="prefetch" href="/assets/JavaEE.html.1edd4406.js"><link rel="prefetch" href="/assets/git.html.677d73a6.js"><link rel="prefetch" href="/assets/java-annotation.html.ed9d9b62.js"><link rel="prefetch" href="/assets/java-exception.html.ae080669.js"><link rel="prefetch" href="/assets/java-genericit.html.1f42829f.js"><link rel="prefetch" href="/assets/java-io.html.06e99644.js"><link rel="prefetch" href="/assets/java-network.html.388f4c5d.js"><link rel="prefetch" href="/assets/java-oop.html.1e30a343.js"><link rel="prefetch" href="/assets/java-reflection.html.c856f2c4.js"><link rel="prefetch" href="/assets/java-stream.html.5e40f1f8.js"><link rel="prefetch" href="/assets/redis.html.c278eb0a.js"><link rel="prefetch" href="/assets/RabbitMQ.html.305f8c72.js"><link rel="prefetch" href="/assets/nginx.html.285f76e3.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.f52b0741.js"><link rel="prefetch" href="/assets/deploy.html.7f01123c.js"><link rel="prefetch" href="/assets/linux-install-projects.html.c4660ded.js"><link rel="prefetch" href="/assets/linux.html.00c73600.js"><link rel="prefetch" href="/assets/dubbo.html.8bba9cdb.js"><link rel="prefetch" href="/assets/SpringCloud.html.daf4e0bc.js"><link rel="prefetch" href="/assets/SpringCloudAlibaba.html.f5b127fd.js"><link rel="prefetch" href="/assets/JavaEE.html.f4870948.js"><link rel="prefetch" href="/assets/git.html.4e671684.js"><link rel="prefetch" href="/assets/java-annotation.html.76a3ea1a.js"><link rel="prefetch" href="/assets/java-exception.html.f49b1146.js"><link rel="prefetch" href="/assets/java-genericit.html.f542c337.js"><link rel="prefetch" href="/assets/java-io.html.a3f87a64.js"><link rel="prefetch" href="/assets/java-network.html.b7e3d797.js"><link rel="prefetch" href="/assets/java-oop.html.105eb028.js"><link rel="prefetch" href="/assets/java-reflection.html.ac0a1af5.js"><link rel="prefetch" href="/assets/java-stream.html.28622aeb.js"><link rel="prefetch" href="/assets/redis.html.ddcf6b00.js"><link rel="prefetch" href="/assets/RabbitMQ.html.32c028b9.js"><link rel="prefetch" href="/assets/nginx.html.1fdefcb1.js"><link rel="prefetch" href="/assets/404.html.ef4ed0d5.js">
    <link rel="stylesheet" href="/assets/style.90dc64ab.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><!--v-if--></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="java基础"><span class="title">java基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="java基础"><span class="title">java基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/java/basic/java-oop.md" class="" aria-label="java面向对象"><!--[--><!--]--> java面向对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/java/basic/java-network.md" class="" aria-label="java网络"><!--[--><!--]--> java网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/java/basic/java-io.md" class="" aria-label="javaIo"><!--[--><!--]--> javaIo <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/guide/spring/JavaEE.md" class="" aria-label="java框架"><!--[--><!--]--> java框架 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="运维部署"><span class="title">运维部署</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="运维部署"><span class="title">运维部署</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/deployment/linux.md" class="" aria-label="linux"><!--[--><!--]--> linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/deployment/deploy.md" class="" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/deployment/docker.md" class="" aria-label="容器化技术"><!--[--><!--]--> 容器化技术 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/guide/java基础/JavaSE.md" class="" aria-label="源码学习"><!--[--><!--]--> 源码学习 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/guide/version_management/git.md" class="" aria-label="版本管理"><!--[--><!--]--> 版本管理 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="java基础"><span class="title">java基础</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="java基础"><span class="title">java基础</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/java/basic/java-oop.md" class="" aria-label="java面向对象"><!--[--><!--]--> java面向对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/java/basic/java-network.md" class="" aria-label="java网络"><!--[--><!--]--> java网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/java/basic/java-io.md" class="" aria-label="javaIo"><!--[--><!--]--> javaIo <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/guide/spring/JavaEE.md" class="" aria-label="java框架"><!--[--><!--]--> java框架 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="运维部署"><span class="title">运维部署</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="运维部署"><span class="title">运维部署</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/deployment/linux.md" class="" aria-label="linux"><!--[--><!--]--> linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/deployment/deploy.md" class="" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/deployment/docker.md" class="" aria-label="容器化技术"><!--[--><!--]--> 容器化技术 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/guide/java基础/JavaSE.md" class="" aria-label="源码学习"><!--[--><!--]--> 源码学习 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/guide/version_management/git.md" class="" aria-label="版本管理"><!--[--><!--]--> 版本管理 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Docker学习大纲 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#docker概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker概述"><!--[--><!--]--> Docker概述 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#docker能干什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker能干什么"><!--[--><!--]--> Docker能干什么 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker安装" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker安装"><!--[--><!--]--> Docker安装 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#docker的基本组成" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker的基本组成"><!--[--><!--]--> Docker的基本组成 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#安装docker" class="router-link-active router-link-exact-active sidebar-item" aria-label="安装Docker"><!--[--><!--]--> 安装Docker <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#阿里云镜像加速-注意该加速器只能是使用阿里的服务器才能用" class="router-link-active router-link-exact-active sidebar-item" aria-label="阿里云镜像加速 -- 注意该加速器只能是使用阿里的服务器才能用"><!--[--><!--]--> 阿里云镜像加速 -- 注意该加速器只能是使用阿里的服务器才能用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#回顾helloworld流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="回顾HelloWorld流程"><!--[--><!--]--> 回顾HelloWorld流程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#底层原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="底层原理"><!--[--><!--]--> 底层原理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker的常用命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker的常用命令"><!--[--><!--]--> Docker的常用命令 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#帮助命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="帮助命令"><!--[--><!--]--> 帮助命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#镜像命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="镜像命令"><!--[--><!--]--> 镜像命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#容器命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="容器命令"><!--[--><!--]--> 容器命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#常用的其他命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用的其他命令"><!--[--><!--]--> 常用的其他命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#小结" class="router-link-active router-link-exact-active sidebar-item" aria-label="小结"><!--[--><!--]--> 小结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#作业练习" class="router-link-active router-link-exact-active sidebar-item" aria-label="作业练习"><!--[--><!--]--> 作业练习 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#可视化-测试玩玩-平常不使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="可视化 - 测试玩玩，平常不使用"><!--[--><!--]--> 可视化 - 测试玩玩，平常不使用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker镜像讲解" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker镜像讲解"><!--[--><!--]--> Docker镜像讲解 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#镜像是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="镜像是什么"><!--[--><!--]--> 镜像是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker镜像加载原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker镜像加载原理"><!--[--><!--]--> Docker镜像加载原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#分层理解" class="router-link-active router-link-exact-active sidebar-item" aria-label="分层理解"><!--[--><!--]--> 分层理解 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#commit镜像" class="router-link-active router-link-exact-active sidebar-item" aria-label="Commit镜像"><!--[--><!--]--> Commit镜像 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#容器数据卷" class="router-link-active router-link-exact-active sidebar-item" aria-label="容器数据卷"><!--[--><!--]--> 容器数据卷 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#什么是容器数据卷" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么是容器数据卷"><!--[--><!--]--> 什么是容器数据卷 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#使用数据卷" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用数据卷"><!--[--><!--]--> 使用数据卷 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#具名和匿名挂载" class="router-link-active router-link-exact-active sidebar-item" aria-label="具名和匿名挂载"><!--[--><!--]--> 具名和匿名挂载 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#初识dockerfile" class="router-link-active router-link-exact-active sidebar-item" aria-label="初识Dockerfile"><!--[--><!--]--> 初识Dockerfile <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#数据卷容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据卷容器"><!--[--><!--]--> 数据卷容器 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dockerfile"><!--[--><!--]--> Dockerfile <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile-介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dockerfile 介绍"><!--[--><!--]--> Dockerfile 介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile构建过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dockerfile构建过程"><!--[--><!--]--> Dockerfile构建过程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile的指令" class="router-link-active router-link-exact-active sidebar-item" aria-label="DockerFile的指令"><!--[--><!--]--> DockerFile的指令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#实战测试" class="router-link-active router-link-exact-active sidebar-item" aria-label="实战测试"><!--[--><!--]--> 实战测试 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#制作tomcat镜像" class="router-link-active router-link-exact-active sidebar-item" aria-label="制作Tomcat镜像"><!--[--><!--]--> 制作Tomcat镜像 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#发布自己的镜像" class="router-link-active router-link-exact-active sidebar-item" aria-label="发布自己的镜像"><!--[--><!--]--> 发布自己的镜像 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#小结-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="小结"><!--[--><!--]--> 小结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker-网络" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker 网络"><!--[--><!--]--> Docker 网络 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/deployment/docker.html#理解docker0" class="router-link-active router-link-exact-active sidebar-item" aria-label="理解Docker0"><!--[--><!--]--> 理解Docker0 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/deployment/docker.html#自定义网络" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义网络"><!--[--><!--]--> 自定义网络 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>笔记参考视频：https://www.bilibili.com/video/BV1og4y1q7M4 视频作者：狂神</p></div><h1 id="docker学习大纲" tabindex="-1"><a class="header-anchor" href="#docker学习大纲" aria-hidden="true">#</a> Docker学习大纲</h1><ul><li>Docker概述</li><li>Docker安装</li><li>Docker命令 <ul><li>镜像命令</li><li>容器命令</li><li>操作命令 ....</li></ul></li><li>Docker镜像！</li><li>容器数据卷！</li><li>DockerFile</li><li>Docker网络原理</li><li>IDEA整合DOcker</li><li>Docker Compose</li><li>Docker Swarm</li></ul><hr><p><strong>目录</strong></p><nav class="table-of-contents"><ul><li><a aria-current="page" href="/guide/deployment/docker.html#docker概述" class="router-link-active router-link-exact-active">Docker概述</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#docker能干什么" class="router-link-active router-link-exact-active">Docker能干什么</a></li></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker安装" class="router-link-active router-link-exact-active">Docker安装</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#docker的基本组成" class="router-link-active router-link-exact-active">Docker的基本组成</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#安装docker" class="router-link-active router-link-exact-active">安装Docker</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#阿里云镜像加速-注意该加速器只能是使用阿里的服务器才能用" class="router-link-active router-link-exact-active">阿里云镜像加速 -- 注意该加速器只能是使用阿里的服务器才能用</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#回顾helloworld流程" class="router-link-active router-link-exact-active">回顾HelloWorld流程</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#底层原理" class="router-link-active router-link-exact-active">底层原理</a></li></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker的常用命令" class="router-link-active router-link-exact-active">Docker的常用命令</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#帮助命令" class="router-link-active router-link-exact-active">帮助命令</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#镜像命令" class="router-link-active router-link-exact-active">镜像命令</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#容器命令" class="router-link-active router-link-exact-active">容器命令</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#常用的其他命令" class="router-link-active router-link-exact-active">常用的其他命令</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#小结" class="router-link-active router-link-exact-active">小结</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#作业练习" class="router-link-active router-link-exact-active">作业练习</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#可视化-测试玩玩-平常不使用" class="router-link-active router-link-exact-active">可视化 - 测试玩玩，平常不使用</a></li></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker镜像讲解" class="router-link-active router-link-exact-active">Docker镜像讲解</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#镜像是什么" class="router-link-active router-link-exact-active">镜像是什么</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker镜像加载原理" class="router-link-active router-link-exact-active">Docker镜像加载原理</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#分层理解" class="router-link-active router-link-exact-active">分层理解</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#commit镜像" class="router-link-active router-link-exact-active">Commit镜像</a></li></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#容器数据卷" class="router-link-active router-link-exact-active">容器数据卷</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#什么是容器数据卷" class="router-link-active router-link-exact-active">什么是容器数据卷</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#使用数据卷" class="router-link-active router-link-exact-active">使用数据卷</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#具名和匿名挂载" class="router-link-active router-link-exact-active">具名和匿名挂载</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#初识dockerfile" class="router-link-active router-link-exact-active">初识Dockerfile</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#数据卷容器" class="router-link-active router-link-exact-active">数据卷容器</a></li></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile" class="router-link-active router-link-exact-active">Dockerfile</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile-介绍" class="router-link-active router-link-exact-active">Dockerfile 介绍</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile构建过程" class="router-link-active router-link-exact-active">Dockerfile构建过程</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#dockerfile的指令" class="router-link-active router-link-exact-active">DockerFile的指令</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#实战测试" class="router-link-active router-link-exact-active">实战测试</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#制作tomcat镜像" class="router-link-active router-link-exact-active">制作Tomcat镜像</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#发布自己的镜像" class="router-link-active router-link-exact-active">发布自己的镜像</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#小结-1" class="router-link-active router-link-exact-active">小结</a></li></ul></li><li><a aria-current="page" href="/guide/deployment/docker.html#docker-网络" class="router-link-active router-link-exact-active">Docker 网络</a><ul><li><a aria-current="page" href="/guide/deployment/docker.html#理解docker0" class="router-link-active router-link-exact-active">理解Docker0</a></li><li><a aria-current="page" href="/guide/deployment/docker.html#自定义网络" class="router-link-active router-link-exact-active">自定义网络</a></li></ul></li></ul></nav><h2 id="docker概述" tabindex="-1"><a class="header-anchor" href="#docker概述" aria-hidden="true">#</a> Docker概述</h2><p><img src="/images/md_images/docker/docker.png" alt="docker图片"> Docker的思想就来自于集装箱 隔离：Docker的核心思想，打包装箱，每个箱子之间是隔离的。 Docker利用隔离机制，可以将服务器利用到极致</p><p>Docker是基于Go语言开发的！是一个开源项目 官网：https://www.docker.com/ 中文官网：https://dockerdocs.cn/ 文档地址：https://docs.docker.com/ Docker的文档是很详细的。 仓库地址：https://hub.docker.com/</p><h3 id="docker能干什么" tabindex="-1"><a class="header-anchor" href="#docker能干什么" aria-hidden="true">#</a> Docker能干什么</h3><div class="custom-container tip"><p class="custom-container-title">虚拟机技术</p></div><p><img src="/images/md_images/docker/虚拟机.png" alt="虚拟机示意图"> 虚拟机技术的缺点：</p><ol><li>资源占用多</li><li>冗余步骤太多</li><li>启动很慢</li></ol><div class="custom-container tip"><p class="custom-container-title">容器化技术</p></div><!----><p><img src="/images/md_images/docker/容器化技术.png" alt="容器化示意图"></p><p>Docker和 虚拟机技术的不同：</p><ul><li>传统虚拟机，虚拟出一套硬件，运行运行一个完整的操作系统，然后在这个系统上安装和运行软件</li><li>容器内的应用直接运行在宿主机的内核，容器没有自己的内核，也没有虚拟我们的硬件，所以轻便了。</li><li>每个容器间是互相隔离的，每个容器都有一个属于自己的文件系统，互不影响。</li></ul><div class="custom-container tip"><p class="custom-container-title">DevOps(开发、运维)</p></div><p><strong>应用更快速的交付和部署：</strong></p><p>传统：一堆帮助文档，和教程 Docker： 打包镜像发布测试，一键部署</p><p><strong>更便捷的升级和扩缩容：</strong></p><p>使用了Docker后，我们部署应用就和搭积木一样；项目打包为一个镜像，扩展 服务器A！服务器B</p><p><strong>更简单的系统运维：</strong></p><p>在容器化后我们的开发和运维高度是一致的</p><p><strong>更高效的计算资源利用：</strong></p><p>Docker是内核级别的虚拟化，可以在一个物理机上可以运行很多的容器实例！服务器的性能可以被压榨到极致</p><h2 id="docker安装" tabindex="-1"><a class="header-anchor" href="#docker安装" aria-hidden="true">#</a> Docker安装</h2><h3 id="docker的基本组成" tabindex="-1"><a class="header-anchor" href="#docker的基本组成" aria-hidden="true">#</a> Docker的基本组成</h3><p><img src="/images/md_images/docker/Docker架构图.webp" alt="Docker架构图"></p><p><strong>镜像(image):</strong></p><p>Docker镜像就好比是一个模板，可以通过这个模板来创建容器服务。<br> tomact镜像===&gt; run ===&gt;tomact01容器(提供服务)<br> 通过这个镜像可以创建多个容器(最终服务运行或者项目运行就是在容器中)。</p><p><strong>容器(container):</strong></p><p>Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。<br> 启动，停止，删除 -- 基本命令！<br> 刚开始学习，可以把这个容器理解为一个简易的linux系统。</p><p><strong>仓库(repository):</strong></p><p>仓库就是存放镜像的地方！<br> 仓库分为公有仓库和私有仓库！<br> Docker Hub （默认是国外镜像）<br> 阿里云镜像(需要配置镜像加速器)</p><h3 id="安装docker" tabindex="-1"><a class="header-anchor" href="#安装docker" aria-hidden="true">#</a> 安装Docker</h3><div class="custom-container tip"><p class="custom-container-title">环境准备</p></div><ol><li>需要会一点linxu的基础命令</li><li>Centos7</li><li>连接上服务器</li></ol><div class="custom-container tip"><p class="custom-container-title">环境查看</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#系统内核是3.10以上的</span>
<span class="token punctuation">[</span>root@k8s-master /<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">3.10</span>.0-1160.45.1.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#系统版本</span>
<span class="token punctuation">[</span>root@k8s-master /<span class="token punctuation">]</span><span class="token comment"># cat /etc/os-release</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;CentOS Linux&quot;</span>
<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token string">&quot;7 (Core)&quot;</span>
<span class="token assign-left variable">ID</span><span class="token operator">=</span><span class="token string">&quot;centos&quot;</span>
<span class="token assign-left variable">ID_LIKE</span><span class="token operator">=</span><span class="token string">&quot;rhel fedora&quot;</span>
<span class="token assign-left variable">VERSION_ID</span><span class="token operator">=</span><span class="token string">&quot;7&quot;</span>
<span class="token assign-left variable">PRETTY_NAME</span><span class="token operator">=</span><span class="token string">&quot;CentOS Linux 7 (Core)&quot;</span>
<span class="token assign-left variable">ANSI_COLOR</span><span class="token operator">=</span><span class="token string">&quot;0;31&quot;</span>
<span class="token assign-left variable">CPE_NAME</span><span class="token operator">=</span><span class="token string">&quot;cpe:/o:centos:centos:7&quot;</span>
<span class="token assign-left variable">HOME_URL</span><span class="token operator">=</span><span class="token string">&quot;https://www.centos.org/&quot;</span>
<span class="token assign-left variable">BUG_REPORT_URL</span><span class="token operator">=</span><span class="token string">&quot;https://bugs.centos.org/&quot;</span>

<span class="token assign-left variable">CENTOS_MANTISBT_PROJECT</span><span class="token operator">=</span><span class="token string">&quot;CentOS-7&quot;</span>
<span class="token assign-left variable">CENTOS_MANTISBT_PROJECT_VERSION</span><span class="token operator">=</span><span class="token string">&quot;7&quot;</span>
<span class="token assign-left variable">REDHAT_SUPPORT_PRODUCT</span><span class="token operator">=</span><span class="token string">&quot;centos&quot;</span>
<span class="token assign-left variable">REDHAT_SUPPORT_PRODUCT_VERSION</span><span class="token operator">=</span><span class="token string">&quot;7&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">安装</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token comment"># 1.卸载旧版的docker</span>
<span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine

<span class="token comment"># 2.安装一些必要的安装包</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils

<span class="token comment"># 3.配置镜像仓库</span>
<span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo <span class="token comment">#默认是国外的镜像，用国内的</span>
<span class="token comment"># 阿里云镜像地址</span>
<span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

<span class="token comment">#更新yum软件包索引</span>
yum makecache fast

<span class="token comment"># 4.安装docker相关</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-compose-plugin

<span class="token comment"># 5.使用docker version查看是否安装成功</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span> <span class="token function">docker</span> version
Client: Docker Engine - Community
 Version:           <span class="token number">20.10</span>.21
 API version:       <span class="token number">1.41</span>
 Go version:        go1.18.7
 Git commit:        baeda1f
 Built:             Tue Oct <span class="token number">25</span> <span class="token number">18</span>:04:24 <span class="token number">2022</span>
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      <span class="token boolean">true</span>

Server: Docker Engine - Community
 Engine:
  Version:          <span class="token number">20.10</span>.21
  API version:      <span class="token number">1.41</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>
  Go version:       go1.18.7
  Git commit:       <span class="token number">3056208</span>
  Built:            Tue Oct <span class="token number">25</span> <span class="token number">18</span>:02:38 <span class="token number">2022</span>
  OS/Arch:          linux/amd64
  Experimental:     <span class="token boolean">false</span>
 containerd:
  Version:          <span class="token number">1.6</span>.10
  GitCommit:        770bd0108c32f3fb5c73ae1264f7e503fe7b2661
 runc:
  Version:          <span class="token number">1.1</span>.4
  GitCommit:        v1.1.4-0-g5fd4c4d
 docker-init:
  Version:          <span class="token number">0.19</span>.0
  GitCommit:        de40ad0

<span class="token comment"># 6. 启动docker</span>
<span class="token function">sudo</span> systemctl start <span class="token function">docker</span>

<span class="token comment"># 7. 使用docker测试hello-world</span>
<span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
<span class="token comment">#运行结果</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span> <span class="token function">sudo</span> <span class="token function">docker</span> run hello-world
    Unable to <span class="token function">find</span> image <span class="token string">&#39;hello-world:latest&#39;</span> locally
    latest: Pulling from library/hello-world
    2db29710123e: Pull complete
    Digest: sha256:faa03e786c97f07ef34423fccceeec2398ec8a5759259f94d99078f264e9d7af
    Status: Downloaded newer image <span class="token keyword">for</span> hello-world:latest

    Hello from Docker<span class="token operator">!</span>
    This message shows that your installation appears to be working correctly.

    To generate this message, Docker took the following steps:
    <span class="token number">1</span>. The Docker client contacted the Docker daemon.
    <span class="token number">2</span>. The Docker daemon pulled the <span class="token string">&quot;hello-world&quot;</span> image from the Docker Hub.
        <span class="token punctuation">(</span>amd64<span class="token punctuation">)</span>
    <span class="token number">3</span>. The Docker daemon created a new container from that image <span class="token function">which</span> runs the
        executable that produces the output you are currently reading.
    <span class="token number">4</span>. The Docker daemon streamed that output to the Docker client, <span class="token function">which</span> sent it
        to your terminal.

    To try something <span class="token function">more</span> ambitious, you can run an Ubuntu container with:
    $ <span class="token function">docker</span> run <span class="token parameter variable">-it</span> ubuntu <span class="token function">bash</span>

    Share images, automate workflows, and <span class="token function">more</span> with a <span class="token function">free</span> Docker ID:
    https://hub.docker.com/

    For <span class="token function">more</span> examples and ideas, visit:
    https://docs.docker.com/get-started/

<span class="token comment"># 8. 查看下载的hello-world 镜像</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span> <span class="token function">docker</span> images
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
hello-world   latest    feb5d9fea6a5   <span class="token number">14</span> months ago   <span class="token number">13</span>.3kB

<span class="token comment"># 9. 其他 - 卸载docker</span>
<span class="token comment"># 卸载依赖</span>
<span class="token function">sudo</span> yum remove docker-ce docker-ce-cli containerd.io docker-compose-plugin  
<span class="token comment"># 删除资源</span>
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/containerd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="阿里云镜像加速-注意该加速器只能是使用阿里的服务器才能用" tabindex="-1"><a class="header-anchor" href="#阿里云镜像加速-注意该加速器只能是使用阿里的服务器才能用" aria-hidden="true">#</a> 阿里云镜像加速 -- 注意该加速器只能是使用阿里的服务器才能用</h3><ol><li><p>登录阿里云，找到容器镜像服务 <img src="/images/md_images/docker/阿里云容器镜像服务位置.png" alt="容器镜像服务位置"></p></li><li><p>找到镜像加速器 <img src="/images/md_images/docker/阿里云镜像加速器位置.png" alt="镜像加速器位置"></p></li><li><p>找到对应的操作系统，按照操作文档操作即可</p></li></ol><h3 id="回顾helloworld流程" tabindex="-1"><a class="header-anchor" href="#回顾helloworld流程" aria-hidden="true">#</a> 回顾HelloWorld流程</h3><p><img src="/images/md_images/docker/Docker-run的流程图.png" alt="docker-Run的流程图"></p><h3 id="底层原理" tabindex="-1"><a class="header-anchor" href="#底层原理" aria-hidden="true">#</a> 底层原理</h3><ol><li>Docker是怎样工作的？ Docker是一个Client-server 结构的系统，Docker的守护进程运行在主机上。通过Socket从客户端访问！<br> DockerServer接收到Docker-Client的指令，就会执行这个命令！ <img src="/images/md_images/docker/Docker的工作流程.png" alt="Docker的工作流程"></li><li>Docker为什么比VM快？ <ul><li>Docker有着比VM更少的抽象层</li><li>Docker利用的是宿主机的内核，VM需要的是Guest OS（虚拟机操作系统）<br><img src="/images/md_images/docker/VM和Docker对比-EN.webp" alt="Docker和VM对比图"><img src="/images/md_images/docker/Docker和VM对比English.webp" alt="Docker和VM对比图"></li><li>新建一个容器时，Docker不需要想VM一样重新加载一个操作系统内核。</li><li>VM是加载Guest OS-分钟级别的；Docker是利用宿主机的操作系统-秒级的。</li></ul></li></ol><h2 id="docker的常用命令" tabindex="-1"><a class="header-anchor" href="#docker的常用命令" aria-hidden="true">#</a> Docker的常用命令</h2><h3 id="帮助命令" tabindex="-1"><a class="header-anchor" href="#帮助命令" aria-hidden="true">#</a> 帮助命令</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> version      <span class="token comment">#显示docker的版本信息</span>
<span class="token function">docker</span> info         <span class="token comment">#显示docker的系统信息，包括镜像和容器的数量</span>
<span class="token function">docker</span> 命令 <span class="token parameter variable">--help</span>  <span class="token comment">#帮助命令</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>帮助文档地址：https://docs.docker.com/reference/</p><h3 id="镜像命令" tabindex="-1"><a class="header-anchor" href="#镜像命令" aria-hidden="true">#</a> 镜像命令</h3><p><strong>docker images</strong> 查看所有本机的主机上的镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
hello-world   latest    feb5d9fea6a5   <span class="token number">14</span> months ago   <span class="token number">13</span>.3kB

<span class="token comment"># 解释</span>
REPOSITORY      镜像的仓库源
TAG             镜像的标签
IMAGE ID        镜像的id
CREATED         镜像的创建时间
SIZE            镜像的大小

<span class="token comment"># 可扩展项</span>
-a, <span class="token parameter variable">--all</span>             <span class="token comment">#列出所有的镜像</span>
-q, <span class="token parameter variable">--quiet</span>           <span class="token comment">#只列出镜像的id</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>docker search</strong> 搜索镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker search mysql</span>
NAME                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
mysql                           MySQL is a widely used, open-source relation…   <span class="token number">13556</span>     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mariadb                         MariaDB Server is a high performing <span class="token function">open</span> sou…   <span class="token number">5168</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>



<span class="token comment"># 可选项</span>
-f, <span class="token parameter variable">--filter</span> filter   <span class="token comment">#过滤条件</span>
<span class="token parameter variable">--limit</span> int           <span class="token comment">#最大查询数</span>

<span class="token comment"># eg： 查询mysql镜像 stars数大于5000的</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker search mysql -f=STARS=5000</span>
NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
mysql     MySQL is a widely used, open-source relation…   <span class="token number">13556</span>     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mariadb   MariaDB Server is a high performing <span class="token function">open</span> sou…   <span class="token number">5168</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>docker pull</strong> 下载镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 下载镜像 docker pull 镜像名 [:tag]</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql</span>
Using default tag: latest   <span class="token comment">#如果不写 tag ,默认就是 latest</span>
latest: Pulling from library/mysql
996f1bba14d6: Pull complete <span class="token comment">#分层下载，docker image核心 联合文件系统</span>
a4355e2c82df: Pull complete
a9d7aedb7ad7: Pull complete
24ee75d8667d: Pull complete
da8c1ec8ff26: Pull complete
ea8748759282: Pull complete
e0859d5816ee: Pull complete
26e144df551b: Pull complete
9878df6a0cc3: Pull complete
b43b187428e3: Pull complete
202e454031c6: Pull complete
Digest: sha256:66efaaa129f12b1c5871508bc8481a9b28c5b388d74ac5d2a6fc314359bbef91 <span class="token comment">#签名</span>
Status: Downloaded newer image <span class="token keyword">for</span> mysql:latest
docker.io/library/mysql:latest   <span class="token comment">#下载的真实地址</span>

<span class="token comment"># 等价</span>
<span class="token function">docker</span> pull mysql
<span class="token function">docker</span> pull docker.io/library/mysql:latest

<span class="token comment">#指定版本下载</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql:5.7</span>
<span class="token number">5.7</span>: Pulling from library/mysql
d96bccd7291f: Pull complete
feae47af51d5: Pull complete
a64d38b9fa31: Pull complete
da689aaabebf: Pull complete
6a2a532732de: Pull complete
9063a4855045: Pull complete
625a84b6adf6: Pull complete
7084e7269f30: Pull complete
161795475ff3: Pull complete
6b2f7a84c8fc: Pull complete
cf120096e55e: Pull complete
Digest: sha256:4149a92977a54d27cbd6f81cca3817e6278a844d566b45f9ff1908bb2714b1ca
Status: Downloaded newer image <span class="token keyword">for</span> mysql:5.7
docker.io/library/mysql:5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>docker rmi</strong> 删除镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker rmi -f 镜像id    #删除指定的镜像，</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker rmi -f 镜像id  镜像id 镜像id  #删除多个指定的镜像，</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker rmi -f $(docker images -aq)  #删除全部的容器</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="容器命令" tabindex="-1"><a class="header-anchor" href="#容器命令" aria-hidden="true">#</a> 容器命令</h3><p>说明：有了镜像才可以创建容器， 下载一个centons镜像来测试一下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull centos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>新建容器并启动 <strong>docker run [可选参数] image</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#可选参数说明</span>
<span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;name&quot;</span>   <span class="token comment">#容器名字 ，用来区分容器</span>
<span class="token parameter variable">-d</span>              <span class="token comment">#后台方式进行</span>
<span class="token parameter variable">-it</span>             <span class="token comment">#使用交互方式运行，进行容器查看内容</span>
<span class="token parameter variable">-p</span>              <span class="token comment">#指定容器的端口 -p  </span>
    <span class="token parameter variable">-p</span>  ip:主机端口：容器端口
    <span class="token parameter variable">-p</span>  主机端口:容器端口 （常用）
    <span class="token parameter variable">-p</span>  容器端口
<span class="token parameter variable">-P</span>              <span class="token comment">#随机指定端口</span>

<span class="token comment"># 测试，启动contos容器并进入</span>

<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker run -it centos</span>
<span class="token punctuation">[</span>root@a021e5d75c56 /<span class="token punctuation">]</span><span class="token comment"># ls   查看容器内的centos </span>
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
<span class="token punctuation">[</span>root@a021e5d75c56 /<span class="token punctuation">]</span><span class="token comment"># exit 退出容器</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>docker ps</strong> 列出所有的运行的容器 #列出当前正在运行的容器-（什么也不带） -a #列出当前正在运行的容器+带出历史运行的容器 -n=? #显示最近创建的容器 -p #只显示容器号</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES
a021e5d75c56   centos         <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">3</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">2</span> minutes ago             hungry_lovelace
c23f7aa44616   feb5d9fea6a5   <span class="token string">&quot;/hello&quot;</span>      <span class="token number">4</span> days ago      Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">4</span> days ago                stupefied_payne
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>退出容器</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">exit</span>        <span class="token comment">#直接容器停止并退出</span>
Ctrl + P + Q <span class="token comment">#容器不停止退出</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>docker rm</strong> 删除容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>    <span class="token function">docker</span> <span class="token function">rm</span> 容器id                <span class="token comment">#根据容器id删除容器，不能删除正在运行的容器</span>
    <span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>   <span class="token comment">#删除所有容器  $() 代表的意思是：参数传递</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>启动和停止容器操作</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> start 容器id         <span class="token comment">#启动容器</span>
<span class="token function">docker</span> restart 容器id       <span class="token comment">#重启容器</span>
<span class="token function">docker</span> stop 容器id          <span class="token comment">#停止当前正在运行的容器</span>
<span class="token function">docker</span> <span class="token function">kill</span> 容器id          <span class="token comment">#强制停止当前运行的容器</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="常用的其他命令" tabindex="-1"><a class="header-anchor" href="#常用的其他命令" aria-hidden="true">#</a> 常用的其他命令</h3><p><strong>后台启动容器</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker run -d 镜像名</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker run -d centos</span>

<span class="token comment">#问题 docker ps ,发现centos会停止</span>
<span class="token comment">#常见的坑，docker容器使用后台运行，就必须要有一个前台进程。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看日志</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs <span class="token parameter variable">-tf</span> <span class="token parameter variable">--tail</span> 容器

<span class="token comment">#显示置顶条数的日志</span>
<span class="token function">docker</span> logs <span class="token parameter variable">-tf</span> <span class="token parameter variable">--tail</span> <span class="token number">10</span> 容器id
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看容器中进程信息</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># docker top 容器id</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker top 86d2f657ba68</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>查看镜像的源数据</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># docker inspect 容器id</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker inspect 86d2f657ba68</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;86d2f657ba68b632d53bac1119823d5e54527264627f5c3601663c0a48309475&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2022-12-06T01:57:43.262393861Z&quot;</span>,
        <span class="token string">&quot;Path&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/bin/bash&quot;</span>,
        <span class="token string">&quot;Args&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
        <span class="token string">&quot;State&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Status&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;exited&quot;</span>,
            <span class="token string">&quot;Running&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Paused&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Restarting&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;OOMKilled&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Dead&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Pid&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;ExitCode&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;Error&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;StartedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2022-12-06T01:57:43.563478918Z&quot;</span>,
            <span class="token string">&quot;FinishedAt&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2022-12-06T01:57:43.582197933Z&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Image&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;</span>,
        <span class="token string">&quot;ResolvConfPath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/86d2f657ba68b632d53bac1119823d5e54527264627f5c3601663c0a48309475/resolv.conf&quot;</span>,
        <span class="token string">&quot;HostnamePath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/86d2f657ba68b632d53bac1119823d5e54527264627f5c3601663c0a48309475/hostname&quot;</span>,
        <span class="token string">&quot;HostsPath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/86d2f657ba68b632d53bac1119823d5e54527264627f5c3601663c0a48309475/hosts&quot;</span>,
        <span class="token string">&quot;LogPath&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/containers/86d2f657ba68b632d53bac1119823d5e54527264627f5c3601663c0a48309475/86d2f657ba68b632d53bac1119823d5e54527264627f5c3601663c0a48309475-json.log&quot;</span>,
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/distracted_moser&quot;</span>,
        <span class="token string">&quot;RestartCount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;overlay2&quot;</span>,
        <span class="token string">&quot;Platform&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;linux&quot;</span>,
        <span class="token string">&quot;MountLabel&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;ProcessLabel&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;AppArmorProfile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;ExecIDs&quot;</span><span class="token builtin class-name">:</span> null,
        <span class="token string">&quot;HostConfig&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Binds&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;ContainerIDFile&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;LogConfig&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;json-file&quot;</span>,
                <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;NetworkMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;PortBindings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;RestartPolicy&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;no&quot;</span>,
                <span class="token string">&quot;MaximumRetryCount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;AutoRemove&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;VolumeDriver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;VolumesFrom&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CapAdd&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CapDrop&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CgroupnsMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;host&quot;</span>,
            <span class="token string">&quot;Dns&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;DnsOptions&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;DnsSearch&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;ExtraHosts&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;GroupAdd&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;IpcMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;private&quot;</span>,
            <span class="token string">&quot;Cgroup&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;OomScoreAdj&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;PidMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Privileged&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;PublishAllPorts&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;ReadonlyRootfs&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;SecurityOpt&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;UTSMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;UsernsMode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;ShmSize&quot;</span><span class="token builtin class-name">:</span> <span class="token number">67108864</span>,
            <span class="token string">&quot;Runtime&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runc&quot;</span>,
            <span class="token string">&quot;ConsoleSize&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token number">0</span>,
                <span class="token number">0</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Isolation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;CpuShares&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;Memory&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;NanoCpus&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CgroupParent&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;BlkioWeight&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;BlkioWeightDevice&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;BlkioDeviceReadBps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;BlkioDeviceWriteBps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;BlkioDeviceReadIOps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;BlkioDeviceWriteIOps&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CpuPeriod&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuQuota&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuRealtimePeriod&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuRealtimeRuntime&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpusetCpus&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;CpusetMems&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Devices&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
            <span class="token string">&quot;DeviceCgroupRules&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;DeviceRequests&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;KernelMemory&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;KernelMemoryTCP&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MemoryReservation&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MemorySwap&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MemorySwappiness&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;OomKillDisable&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;PidsLimit&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Ulimits&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;CpuCount&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;CpuPercent&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IOMaximumIOps&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IOMaximumBandwidth&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;MaskedPaths&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/proc/asound&quot;</span>,
                <span class="token string">&quot;/proc/acpi&quot;</span>,
                <span class="token string">&quot;/proc/kcore&quot;</span>,
                <span class="token string">&quot;/proc/keys&quot;</span>,
                <span class="token string">&quot;/proc/latency_stats&quot;</span>,
                <span class="token string">&quot;/proc/timer_list&quot;</span>,
                <span class="token string">&quot;/proc/timer_stats&quot;</span>,
                <span class="token string">&quot;/proc/sched_debug&quot;</span>,
                <span class="token string">&quot;/proc/scsi&quot;</span>,
                <span class="token string">&quot;/sys/firmware&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;ReadonlyPaths&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/proc/bus&quot;</span>,
                <span class="token string">&quot;/proc/fs&quot;</span>,
                <span class="token string">&quot;/proc/irq&quot;</span>,
                <span class="token string">&quot;/proc/sys&quot;</span>,
                <span class="token string">&quot;/proc/sysrq-trigger&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;GraphDriver&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Data&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;LowerDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/aad5afcc56d3f542a237bc94fd0f36d1ada64910695067b3ec6a696973d58e8a-init/diff:/var/lib/docker/overlay2/e1c5c7bef0753a8835070c583399946f63ef80ee8a69fda271fd9a8f5808ef73/diff&quot;</span>,
                <span class="token string">&quot;MergedDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/aad5afcc56d3f542a237bc94fd0f36d1ada64910695067b3ec6a696973d58e8a/merged&quot;</span>,
                <span class="token string">&quot;UpperDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/aad5afcc56d3f542a237bc94fd0f36d1ada64910695067b3ec6a696973d58e8a/diff&quot;</span>,
                <span class="token string">&quot;WorkDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/aad5afcc56d3f542a237bc94fd0f36d1ada64910695067b3ec6a696973d58e8a/work&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;overlay2&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Mounts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
        <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Hostname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;86d2f657ba68&quot;</span>,
            <span class="token string">&quot;Domainname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;User&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;AttachStdin&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;AttachStdout&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;AttachStderr&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Tty&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;OpenStdin&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;StdinOnce&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Env&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Cmd&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/bin/bash&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Image&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;centos&quot;</span>,
            <span class="token string">&quot;Volumes&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;WorkingDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Entrypoint&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;OnBuild&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;org.label-schema.build-date&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;20210915&quot;</span>,
                <span class="token string">&quot;org.label-schema.license&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;GPLv2&quot;</span>,
                <span class="token string">&quot;org.label-schema.name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;CentOS Base Image&quot;</span>,
                <span class="token string">&quot;org.label-schema.schema-version&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1.0&quot;</span>,
                <span class="token string">&quot;org.label-schema.vendor&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;CentOS&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;NetworkSettings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;SandboxID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;487d7dc4dd7887e4d37596157f7a8b3125542a3b296fa92daa4d25a1a2941dc9&quot;</span>,
            <span class="token string">&quot;HairpinMode&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;LinkLocalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;LinkLocalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;Ports&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;SandboxKey&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/run/docker/netns/487d7dc4dd78&quot;</span>,
            <span class="token string">&quot;SecondaryIPAddresses&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;SecondaryIPv6Addresses&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
            <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;bridge&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;IPAMConfig&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Aliases&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;NetworkID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;56e8993cf1841092bb6cc5c26f17c7fba6533677e06354db1a800e5c657d7738&quot;</span>,
                    <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
                    <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
                    <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;DriverOpts&quot;</span><span class="token builtin class-name">:</span> null
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>进入当前正在运行的容器</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#容器通常都是后台方式运行的，需要进入容器，添加修改一些配置</span>

<span class="token comment">#方式一</span>
<span class="token comment">#命令</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器id  bashshell

<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker exec -it a11cc0a5e1d5 /bin/bash</span>
<span class="token punctuation">[</span>root@a11cc0a5e1d5 /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var

<span class="token comment">#方式二</span>
<span class="token function">docker</span> attach 容器id
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker attach a11cc0a5e1d5</span>
<span class="token punctuation">[</span>root@a11cc0a5e1d5 /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var

<span class="token comment">##区别：</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span>     <span class="token comment">#进入容器开启一个新的终端，可以在里面操作(常用命令)</span>
<span class="token function">docker</span> attach   <span class="token comment">#进入容器正在执行的终端，不会启动新的进程！</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>从容器内拷贝文件到主机上</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">cp</span> 容器id：容器路径  目的地主机路径

<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES
a11cc0a5e1d5   centos    <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">13</span> minutes ago   Up <span class="token number">13</span> minutes             intelligent_brown
<span class="token comment">#进入docker容器内部</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker exec -it a11cc0a5e1d5 /bin/bash</span>
<span class="token punctuation">[</span>root@a11cc0a5e1d5 /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
<span class="token punctuation">[</span>root@a11cc0a5e1d5 /<span class="token punctuation">]</span><span class="token comment"># cd home/</span>
<span class="token punctuation">[</span>root@a11cc0a5e1d5 home<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token comment">#在容器内创建新的文件</span>
<span class="token punctuation">[</span>root@a11cc0a5e1d5 home<span class="token punctuation">]</span><span class="token comment"># touch test.java</span>
<span class="token punctuation">[</span>root@a11cc0a5e1d5 home<span class="token punctuation">]</span><span class="token comment"># ls</span>
test.java
<span class="token punctuation">[</span>root@a11cc0a5e1d5 home<span class="token punctuation">]</span><span class="token comment"># read escape sequence</span>
<span class="token comment">#将这个文件拷贝出来到主机上</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker cp a11cc0a5e1d5:/home/test.java /home</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  boot  data  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># cd home/</span>
<span class="token punctuation">[</span>root@wb home<span class="token punctuation">]</span><span class="token comment"># ls</span>
lighthouse  test.java
<span class="token punctuation">[</span>root@wb home<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小结" tabindex="-1"><a class="header-anchor" href="#小结" aria-hidden="true">#</a> 小结</h3><p><img src="/images/md_images/docker/docker命令图.webp" alt="docker命令图"></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>attach <span class="token builtin class-name">:</span>                  	<span class="token comment">##进入指定运行对象</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker attach 96763bc9ea4e </span>
build <span class="token builtin class-name">:</span> 					<span class="token comment">##通过Dockerfile定制镜像</span>
commit <span class="token builtin class-name">:</span> 					<span class="token comment">##提交当前容器为新的镜像</span>
<span class="token function">cp</span> <span class="token builtin class-name">:</span> 						<span class="token comment">##拷贝指定文件或目录到主机</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker cp 96763bc9ea4e:/home/test.java /home/test_docker_cp/</span>
create <span class="token builtin class-name">:</span>					<span class="token comment">##创建新的容器，类似于run，但是不启动容器</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker create centos /bin/bash </span>
diff:						<span class="token comment">##查看docker容器变化</span>
events:						<span class="token comment">##从docker获取实时容器事件</span>
exec: 						<span class="token comment">##进入已经启动的容器运行指令</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it f170a9b28775 /bin/bash</span>
export: 					<span class="token comment">##到处容器的内容归为一个tar文档</span>
history:					<span class="token comment">##展示一个镜像形成历史</span>
images:						<span class="token comment">##列出系统当前镜像</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker images -a</span>
import:						<span class="token comment">## 从tar包中内容中创建一个新的文件系统</span>
info:						<span class="token comment">## 查看系统详细信息</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker info</span>
inspect:					<span class="token comment">## 查看容器详细信息</span>
	<span class="token punctuation">[</span>root@VM-0-9-centos ~<span class="token punctuation">]</span><span class="token comment"># docker inspect f170a9b28775</span>
kill: 						<span class="token comment">## 强制结束指定容器</span>
load:						<span class="token comment">## 从一个tar包中加载一个镜像</span>
login:						<span class="token comment">## 注册或者登录一个docker源服务器</span>
logout:						<span class="token comment">## 登出</span>
logs:  						<span class="token comment">## 输出当前容器日志信息</span>
	<span class="token function">docker</span> logs <span class="token parameter variable">-tf</span> 容器id 			 
	<span class="token function">docker</span> logs <span class="token parameter variable">--tail</span> number 容器id <span class="token comment">#num为要显示的日志条数</span>
port:						<span class="token comment">## 查看映射端口对应容器内部的源端口</span>
pasue: 						<span class="token comment">## 暂停容器</span>
ps:							<span class="token comment">## 列出容器列表</span>
	<span class="token function">docker</span> <span class="token function">ps</span>     <span class="token comment">#运行中列表  </span>
	<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span>  <span class="token comment">#所有容器列表</span>
pull: 						<span class="token comment">## 从docker源镜像拉取指定镜像</span>
	<span class="token function">docker</span> pull mysql	<span class="token comment">#默认拉取最新版本mysql</span>
push:						<span class="token comment">## 推送指定镜像或库镜像至docker源服务器</span>
restart: 					<span class="token comment">## 重启正在运行的容器</span>
rm: 						<span class="token comment">## 移除一个或者多个容器</span>
    <span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>	<span class="token comment">#移除所有容器</span>
rmi:						<span class="token comment">## 移除一个或者多个镜像</span>
run:						<span class="token comment">## 创建一个容器并运行内容</span>
	<span class="token function">docker</span> run <span class="token parameter variable">-it</span> centos /bin/bash
save: 						<span class="token comment">## 保存一个镜像为一个tar包</span>
search: 					<span class="token comment">## 在docker	hub中搜索镜像</span>
	<span class="token function">docker</span> search mysql						<span class="token comment">#搜索所有mysql镜像</span>
	<span class="token function">docker</span> search mysql <span class="token parameter variable">--filter</span><span class="token operator">=</span>STARS<span class="token operator">=</span><span class="token number">3000</span> <span class="token comment">#搜索收藏数大于3000的镜像</span>
start:						<span class="token comment">## 启动容器</span>
	<span class="token function">docker</span> start <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
stop:						<span class="token comment">## 停止容器</span>
	<span class="token function">docker</span> stop <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
tag:						<span class="token comment">## 给源服务器中镜像设置标签</span>
top:						<span class="token comment">## 查看容器中运行的进程信息</span>
unpause:					<span class="token comment">## 取消暂停容器</span>
version:  					<span class="token comment">## 查看docker版本号</span>
	<span class="token function">docker</span> version
wait:						<span class="token comment">## 截取容器停止时的退出状态值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker 的命令是十分多的，之前只是学习了镜像和容器最基本的命令。</p><h3 id="作业练习" tabindex="-1"><a class="header-anchor" href="#作业练习" aria-hidden="true">#</a> 作业练习</h3><div class="custom-container tip"><p class="custom-container-title">docker安装nginx</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#1.搜索镜像 search 建议到 https://hub.docker.com/ 去查看，还可以看帮助文档</span>
<span class="token comment">#2.下载镜像 pull</span>
<span class="token punctuation">[</span>root@wb home<span class="token punctuation">]</span><span class="token comment"># docker pull nginx:1.22.1</span>
<span class="token number">1.22</span>.1: Pulling from library/nginx
a603fa5e3b41: Pull complete
50b97857b95c: Pull complete
0edfe97a837a: Pull complete
f95a257c65b6: Pull complete
0bf5e07cb0af: Pull complete
f3c8f37c59f0: Pull complete
Digest: sha256:0cdcf341a2691f6ca151e9b078df97a26f7bbbe5b092d33cfeab3740e6c632d7
Status: Downloaded newer image <span class="token keyword">for</span> nginx:1.22.1
docker.io/library/nginx:1.22.1
<span class="token comment">#3.运行测试</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
nginx        <span class="token number">1.22</span>.1    <span class="token number">404359394820</span>   <span class="token number">2</span> weeks ago   142MB

<span class="token comment">#-d 后台运行</span>
<span class="token comment">#--name 容器名称</span>
<span class="token comment">#-p 宿主机端口:容器内部端口</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker run -d --name nginx01 -p 3333:80 404359394820</span>
fb4d582284911725dff95cfbbfafe3707c38de1f14881aab1b518cc59bd6d2db
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                                   NAMES
fb4d58228491   <span class="token number">404359394820</span>   <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">8</span> seconds ago   Up <span class="token number">8</span> seconds   <span class="token number">0.0</span>.0.0:3333-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp, :::3333-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp   nginx01
<span class="token comment"># 内部访问nginx</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># curl localhost:3333</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
    html <span class="token punctuation">{</span> color-scheme: light dark<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    body <span class="token punctuation">{</span> width: 35em<span class="token punctuation">;</span> margin: <span class="token number">0</span> auto<span class="token punctuation">;</span>
    font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and
    working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to
    <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span>
    Commercial support is available at
    <span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>


<span class="token comment">#进入容器</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker exec -it nginx01 /bin/bash</span>
root@fb4d58228491:/<span class="token comment"># ls</span>
    bin  boot  dev  docker-entrypoint.d  docker-entrypoint.sh  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@fb4d58228491:/<span class="token comment"># whereis nginx</span>
    nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx
root@fb4d58228491:/<span class="token comment"># cd /etc/nginx/</span>
root@fb4d58228491:/etc/nginx<span class="token comment"># ls</span>
    conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params
root@fb4d58228491:/etc/nginx<span class="token comment">#</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>端口暴露： <img src="/images/md_images/docker/docker容器端口暴露.png" alt="docker容器端口暴露概念"></p><p>思考问题：每次修改nginx配置文件，都需要进入容器内部？十分麻烦，如果可以在容器外部提供一个映射路径，达到在容器外部修改文件名，容器内部就可以自动修改？ -v 数据卷！</p><div class="custom-container tip"><p class="custom-container-title">docker安装tomcat</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#官网的启动方式</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> tomcat:9.0
<span class="token comment">#按照之前的启动方式，停止了容器后，容器还是可以查询到的，docker run -it --rm 是启动完，退出就会删除</span>
<span class="token comment">#建议测试时使用这种方式，平常不要用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#下载镜像tomact</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker pull tomcat:9.0</span>

<span class="token comment">#启动镜像</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 3344:8080 --name tomcat01 684f1015ff35</span>

<span class="token comment">#内部访问  访问成功，但是页面报404 ；原因：默认的镜像只会下载最小的体积；剔除不必要的</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># curl localhost:3344</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html <span class="token assign-left variable">lang</span><span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>HTTP Status <span class="token number">404</span> – Not Found<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
<span class="token comment"># 可以将 webapps.dist 下的文件移动到webapps 即可正常访问</span>

<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker exec -it 85a47e6680d /bin/bash</span>
root@85a47e6680d7:/usr/local/tomcat<span class="token comment"># ls</span>
    bin  BUILDING.txt  conf  CONTRIBUTING.md  lib  LICENSE  logs  native-jni-lib  NOTICE  README.md  RELEASE-NOTES  RUNNING.txt  temp  webapps  webapps.dist  work
root@85a47e6680d7:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@85a47e6680d7:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
root@85a47e6680d7:/usr/local/tomcat<span class="token comment"># ls</span>
    bin  BUILDING.txt  conf  CONTRIBUTING.md  lib  LICENSE  logs  native-jni-lib  NOTICE  README.md  RELEASE-NOTES  RUNNING.txt  temp  webapps  webapps.dist  work
<span class="token comment">#复制文件</span>
root@85a47e6680d7:/usr/local/tomcat<span class="token comment"># cp -r webapps.dist/* webapps</span>
root@85a47e6680d7:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@85a47e6680d7:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
docs  examples  host-manager  manager  ROOT
root@85a47e6680d7:/usr/local/tomcat/webapps<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token comment">#访问成功</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># curl localhost:3344</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html <span class="token assign-left variable">lang</span><span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>meta <span class="token assign-left variable">charset</span><span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> /<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Apache Tomcat/9.0.7<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/title<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>link <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;favicon.ico&quot;</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">&quot;icon&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;image/x-icon&quot;</span> /<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>link <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;tomcat.css&quot;</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text/css&quot;</span> /<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>思考问题：每次发布项目，都需要进入容器十分麻烦？如果可以在容器外部提供一个映射路径，达到在容器外部修改文件名，容器内部就可以自动修改？ -v 数据卷！</p><h3 id="可视化-测试玩玩-平常不使用" tabindex="-1"><a class="header-anchor" href="#可视化-测试玩玩-平常不使用" aria-hidden="true">#</a> 可视化 - 测试玩玩，平常不使用</h3><ul><li>portainer(先用这个)</li><li>Rancher(CI/CD 再用)</li></ul><p><strong>什么是portainer？</strong> Docker 图形化界面管理工具!提供一个后台面板供我们操作</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8088</span>:9000 <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true portainer/portainer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>访问测试： 外网：8088</p><h2 id="docker镜像讲解" tabindex="-1"><a class="header-anchor" href="#docker镜像讲解" aria-hidden="true">#</a> Docker镜像讲解</h2><h3 id="镜像是什么" tabindex="-1"><a class="header-anchor" href="#镜像是什么" aria-hidden="true">#</a> 镜像是什么</h3><p>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境 和 基于运行环境开发的软件，它包含运行某个软件所需要的所有内容，包括代码，运行时库、环境变量和配置文件。 所有的应用，直接打包docker镜像，就可以直接跑起来。 <strong>如何得到镜像</strong></p><ul><li>从远程仓库下载</li><li>自己制作一个镜像 DockerFile</li></ul><h3 id="docker镜像加载原理" tabindex="-1"><a class="header-anchor" href="#docker镜像加载原理" aria-hidden="true">#</a> Docker镜像加载原理</h3><div class="custom-container tip"><p class="custom-container-title">UnionFS (联合文件系统)</p></div><p>UnionFs(联合文件系统):UnionFs(联合文件系统)是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下，Union 文件系统是Docker镜像的基础。镜像可以通过分层来进行继承，基于基础镜像(没有父镜像)，可以制作各种具体的应用镜像。<br> 特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p><div class="custom-container tip"><p class="custom-container-title">Docker镜像加载原理</p></div><p>Docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统UnionFS（联合文件系统）。<br> 分为两个部分：</p><ul><li><p>bootfs（boot file system）：主要包含bootloader和kernel（Linux内核），bootloader主要是引导加载kernel，Linux刚启动时会加载bootfs文件系统，而在Docker镜像的最底层也是bootfs这一层，这与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后，整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</p><p>即：系统启动时需要的引导加载，这个过程会需要一定时间。就是黑屏到开机之间的这么一个过程。电脑、虚拟机、Docker容器启动都需要的过程。在说回镜像，所以这一部分，无论是什么镜像都是公用的。</p></li><li><p>rootfs（root file system）：rootfs在bootfs之上。包含的就是典型Linux系统中的/dev，/proc，/bin，/etc等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。</p><p>即：镜像启动之后的一个小的底层系统，这就是我们之前所说的，容器就是一个小的虚拟机环境，比如Ubuntu，Centos等，这个小的虚拟机环境就相当于rootfs。</p></li></ul><p>平时我们安装进虚拟机的CentOS系统都是好几个G，为什么Docker这里才200M？ 对于一个精简的OS系统，rootfs可以很小，只需要包含最基本的命令、工具和程序库就可以了，因为底层直接用Host（宿主机）的kernel（也就是宿主机或者服务器的boosfs+内核），自己只需要提供rootfs就可以了。</p><p>由此可见对于不同的linux发行版，bootfs基本是一致的，rootfs会有差别，因此不同的发行版可以公用bootfs部分。</p><p>这就是我们之前说：虚拟机的启动是分钟级的，容器的启动是秒级的</p><h3 id="分层理解" tabindex="-1"><a class="header-anchor" href="#分层理解" aria-hidden="true">#</a> 分层理解</h3><div class="custom-container tip"><p class="custom-container-title">Docker分层的镜像</p></div><p>多个镜像都是从相同的base镜像构建的，宿主机只需要在磁盘上保留一份Base镜像，同时内存中也只需要加载一份Base镜像，就可以应用在所有的容器服务之中了。而且镜像的每一层都可以被共享 使用 docker image inspect可以查看镜像元数据</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@192 /<span class="token punctuation">]</span><span class="token comment"># docker image inspect redis:latest</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;sha256:621ceef7494adfcbe0e523593639f6625795cc0dc91a750629367a8c7b3ccebb&quot;</span>,
        <span class="token string">&quot;RepoTags&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;redis:latest&quot;</span>
        <span class="token punctuation">]</span>,
        <span class="token punctuation">..</span>. <span class="token comment"># 省略</span>
        <span class="token punctuation">..</span>. <span class="token comment"># 省略</span>
        <span class="token string">&quot;RootFS&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;layers&quot;</span>,
            <span class="token string">&quot;Layers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span> 
                <span class="token string">&quot;sha256:cb42413394c4059335228c137fe884ff3ab8946a014014309676c25e3ac86864&quot;</span>,
                <span class="token string">&quot;sha256:8e14cb7841faede6e42ab797f915c329c22f3b39026f8338c4c75de26e5d4e82&quot;</span>,
                <span class="token string">&quot;sha256:1450b8f0019c829e638ab5c1f3c2674d117517669e41dd2d0409a668e0807e96&quot;</span>,
                <span class="token string">&quot;sha256:f927192cc30cb53065dc266f78ff12dc06651d6eb84088e82be2d98ac47d42a0&quot;</span>,
                <span class="token string">&quot;sha256:a24a292d018421783c491bc72f6601908cb844b17427bac92f0a22f5fd809665&quot;</span>,
                <span class="token string">&quot;sha256:3480f9cdd491225670e9899786128ffe47054b0a5d54c48f6b10623d2f340632&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">..</span>. <span class="token comment"># 省略</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">加深理解</p></div><p>所有的Docker镜像都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层。<br>   举一个简单的例子，假如基于Ubuntu Linux 16.04创建一个新的镜像，这就是新镜像的第一层；如果在该镜像中添加Python包，就会在基础镜像层之上创建第二个镜像层；如果继续添加一个安全补丁，就会创建第三个镜像层。<br>   该镜像当前已经包含3个镜像层，如下图所示（这只是一个用于演示的很简单的例子）。<br><img src="/images/md_images/docker/三层镜像.png" alt="三层镜像"><br> 在添加额外的镜像层的同时，镜像始终保持是当前所有镜像的组合，理解这一点非常重要。下图中举了一个简单的例子，每个镜像层包含3个文件，而整体的镜像包含了来自两个镜像层的6个文件。<br><img src="/images/md_images/docker/两层镜像文件.png" alt="两层镜像文件"><br> 上图中的鏡像层跟之前图中的略有区别，主要目的是便于展示文件。</p><p>下图中展示了一个稍微复杂的三层镜像，在外部看来整个镜像只有6个文件，这是因为最上层中的文件7是文件5的一个更新版本。</p><p><img src="/images/md_images/docker/三层镜像文件.png" alt="三层镜像文件"><br> 这种情况下，上层镜像层中的文件覆盖了底层镜像层中的文件。这样就使得文件的更新版本作为一个新镜像层添加到镜像当中。<br>   Docker通过存储引擎（新版本采用快照机制）的方式来实现镜像层堆栈，并保证多镜像层对外展示为统一的文件系统。<br> 如上边的三层镜像，Docker最终会把所有镜像层堆叠并合并，对外提供统一的视图，如下图<br><img src="/images/md_images/docker/三层镜像合并图.png" alt="三层镜像合并图"></p><div class="custom-container tip"><p class="custom-container-title">特点</p></div><p>Docker镜像都是只读的，当容器启动后，一个新的可写层被加载到镜像的顶部！ 这一层就是我们所说的容器层，容器之下的叫镜像层。</p><h3 id="commit镜像" tabindex="-1"><a class="header-anchor" href="#commit镜像" aria-hidden="true">#</a> Commit镜像</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> commit 提交容器称为一个新的副本

<span class="token function">docker</span> commit <span class="token parameter variable">-m</span><span class="token operator">=</span><span class="token string">&quot;提交的描述信息&quot;</span> <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">&quot;作者&quot;</span> 容器id 目标镜像名:<span class="token punctuation">[</span>TAG<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实战测试：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 1.启动一个默认的tomcat</span>

<span class="token comment"># 2.发现这个默认的tomcat是没有webapps应用。</span>

<span class="token comment"># 3.自己拷贝一个文件进去</span>

<span class="token comment"># 4. 将我们操作过的tomcat通过commit提交为一个新的镜像，这就是我们自己生成的镜像</span>

<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker commit -m=&quot;add webapps&quot; -a=&quot;xiaobo&quot; 85a47e6680d7 tomact_bo:1.0</span>
sha256:1b48a364246319f0cb1b1788972b37a01a4460f72c1b9698fd0a39616090bcff
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY            TAG       IMAGE ID       CREATED         SIZE
tomact_bo             <span class="token number">1.0</span>       1b48a3642463   <span class="token number">4</span> seconds ago   482MB    <span class="token comment">#自己生成的</span>
tomcat                <span class="token number">9.0</span>       684f1015ff35   <span class="token number">10</span> hours ago    477MB    <span class="token comment">#原来下载的</span>
portainer/portainer   latest    5f11582196a4   <span class="token number">2</span> weeks ago     287MB
nginx                 <span class="token number">1.22</span>.1    <span class="token number">404359394820</span>   <span class="token number">2</span> weeks ago     142MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果我们想要保存当前容器的状态，就可以通过commit来提交，生成一个镜像； 就好比我们之前使用VM是的快照！</p><h2 id="容器数据卷" tabindex="-1"><a class="header-anchor" href="#容器数据卷" aria-hidden="true">#</a> 容器数据卷</h2><h3 id="什么是容器数据卷" tabindex="-1"><a class="header-anchor" href="#什么是容器数据卷" aria-hidden="true">#</a> 什么是容器数据卷</h3><p>Docker将运用与运行的环境打包形成容器运行， Docker容器产生的数据，如果不通过docker commit生成新的镜像，使得数据做为镜像的一部分保存下来， 那么当容器删除后，数据自然也就没有了。 为了能保存数据在Docker中我们使用卷。<br> 卷就是目录或文件，存在于一个或多个容器中，由Docker挂载到容器，但卷不属于联合文件系统（Union FileSystem），因此能够绕过联合文件系统提供一些用于持续存储或共享数据的特性:。<br><strong>卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数据卷。<br> Docker容器卷的工作就是将docker容器数据通过映射进行备份+持久化到本地的主机目录</strong></p><h3 id="使用数据卷" tabindex="-1"><a class="header-anchor" href="#使用数据卷" aria-hidden="true">#</a> 使用数据卷</h3><div class="custom-container tip"><p class="custom-container-title">直接使用命令来挂载 -v</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> 主机目录:容器目录

<span class="token comment">#用centos测试</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker run -it -v /home/ceshi:/home centos /bin/bash</span>

<span class="token comment">#启动起来通过 docker inspect 容器id</span>

<span class="token string">&quot;Mounts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>     
            <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bind&quot;</span>,
                <span class="token string">&quot;Source&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/home/ceshi&quot;</span>,    主机地址
                <span class="token string">&quot;Destination&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/home&quot;</span>,     docker容器内地址
                <span class="token string">&quot;Mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                <span class="token string">&quot;RW&quot;</span><span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;Propagation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;rprivate&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>验证数据的同步 <img src="/images/md_images/docker/容器数据卷-验证挂载.png" alt="容器数据卷-验证挂载"></p><p>再次测试</p><ol><li>停止容器</li><li>在主机上对 /home/ceshi 进行操作</li><li>重启容器</li><li>查看容器内部 /home 下文件是否有更改</li></ol><p><img src="/images/md_images/docker/容器数据卷-验证主机到容器.png" alt="容器数据卷-验证主机到容器"></p><h4 id="实战-安装mysql" tabindex="-1"><a class="header-anchor" href="#实战-安装mysql" aria-hidden="true">#</a> 实战：安装mysql</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#获取镜像</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker pull mysql:5.7</span>

<span class="token comment">#运行容器 做数据卷挂载；需要注意启动mysql需要密码</span>
<span class="token comment">#官方例子：$ docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span>

<span class="token comment">#启动</span>
<span class="token parameter variable">-d</span> 后台运行
<span class="token parameter variable">-p</span> 端口映射
<span class="token parameter variable">-v</span> 卷挂载
<span class="token parameter variable">-e</span> 环境配置
<span class="token parameter variable">--name</span>  容器名称

<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql01 <span class="token parameter variable">-v</span> /home/mysql/conf:/etc/mysql/conf.d <span class="token parameter variable">-v</span> /home/mysql/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> mysql:5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动成功后，可以使用本地连接工具来连接mysql测试一下<br><img src="/images/md_images/docker/测试容器mysql卷挂载.png" alt="测试容器mysql卷挂载"></p><p>我们在本地创建一个数据库查看 宿主机的 /home/mysql/data 下是否有数据 <img src="/images/md_images/docker/测试本地创建数据库宿主机是否有数据.png" alt=""></p><p>而我们将容器删除掉，挂载的卷数据会依然存在。<strong>这就实现了容器数据持久化功能</strong></p><h3 id="具名和匿名挂载" tabindex="-1"><a class="header-anchor" href="#具名和匿名挂载" aria-hidden="true">#</a> 具名和匿名挂载</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#匿名挂载</span>
<span class="token parameter variable">-v</span> 容器内路径
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">--name</span> nginx01 <span class="token parameter variable">-v</span> /etc/nginx nginx

<span class="token comment"># 查看所有的 volume 的情况</span>
<span class="token function">docker</span> volume <span class="token function">ls</span>

<span class="token comment">#这种就是匿名挂载；在-v 只写了容器内的路径，没有写容器外的路径！</span>

<span class="token comment">#具名挂载</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">--name</span> nginx02 <span class="token parameter variable">-v</span> juming-nginx:/etc/nginx nginx

<span class="token comment">#这种的就是具名挂载</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所有的docker 容器内的卷，没有指定目录的情况下都是在 <strong>/var/lib/docker/volumes/xxx/_data</strong><br> 我们通过具名挂载可以方便的找到我们的一个卷，大多数情况下在使用 <strong>具名挂载</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#如何确定是具名还是匿名挂载，还是指定路径挂载</span>
<span class="token parameter variable">-v</span>  容器内路径              <span class="token comment">#匿名挂载</span>
<span class="token parameter variable">-v</span>  卷名：容器内路径        <span class="token comment">#具名挂载</span>
<span class="token parameter variable">-v</span>  /宿主机路径:容器内路径   <span class="token comment">#指定路径挂载</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="初识dockerfile" tabindex="-1"><a class="header-anchor" href="#初识dockerfile" aria-hidden="true">#</a> 初识Dockerfile</h3><p>Dockerfile就是用来构建docker镜像的构建文件!命令脚本！ 通过脚本构建镜像,镜像是一层一层的，脚本一个一个的命令，每个命令就是一层:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#创建一个dockerfile文件，名字可以随机，建议用dockerfile</span>
<span class="token comment">#文件中的内容，指令(大写)、参数</span>
FROM centos

VOLUME <span class="token punctuation">[</span><span class="token string">&quot;volume01&quot;</span>,<span class="token string">&quot;volume02&quot;</span><span class="token punctuation">]</span>

CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;-----end-----&quot;</span>
CMD /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="数据卷容器" tabindex="-1"><a class="header-anchor" href="#数据卷容器" aria-hidden="true">#</a> 数据卷容器</h3><p>-引用 https://blog.csdn.net/weixin_46055944/article/details/124447670</p><p>容器之间的数据共享，可以通过容器数据卷<br> 容器数据卷是指建立数据卷，来同步多个容器间的数据，实现容器间的数据同步。</p><p>首先启动容器1，volume01、volume02为挂载目录。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-20-17-centos docker-test-volume<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY       TAG       IMAGE ID       CREATED          SIZE
jackson/centos   <span class="token number">1.0</span>       556edf4fffd4   <span class="token number">25</span> minutes ago   231MB
nginx            latest    fa5269854a5e   <span class="token number">5</span> days ago       142MB
mysql            <span class="token number">5.7</span>       82d2d47667cf   <span class="token number">5</span> days ago       450MB
centos           latest    5d0da3dc9764   <span class="token number">7</span> months ago     231MB
<span class="token comment"># 之前构建镜像的时候写了版本号，这里启动的时候记得加上版本号，否则就会去docker仓库中找最新的</span>
<span class="token punctuation">[</span>root@VM-20-17-centos docker-test-volume<span class="token punctuation">]</span><span class="token comment"># docker run -it --name docker01 jackson/centos:1.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后启动容器2，通过参数--volumes-from，设置容器2和容器1建立数据卷挂载关系。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-20-17-centos ~<span class="token punctuation">]</span><span class="token comment"># docker run -it --name docker02 --volumes-from docker01 jackson/centos:1.0</span>
<span class="token comment"># 可以看到，容器2与容器1建立挂载关系后，可以看到容器2也有volume01和volume02</span>
<span class="token punctuation">[</span>root@d3fe059ecdb9 /<span class="token punctuation">]</span><span class="token comment"># ls -l</span>
total <span class="token number">56</span>
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">7</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> bin -<span class="token operator">&gt;</span> usr/bin
drwxr-xr-x   <span class="token number">5</span> root root  <span class="token number">360</span> Apr <span class="token number">26</span> 01:50 dev
drwxr-xr-x   <span class="token number">1</span> root root <span class="token number">4096</span> Apr <span class="token number">26</span> 01:50 etc
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> home
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">7</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> lib -<span class="token operator">&gt;</span> usr/lib
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">9</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> lib64 -<span class="token operator">&gt;</span> usr/lib64
drwx------   <span class="token number">2</span> root root <span class="token number">4096</span> Sep <span class="token number">15</span>  <span class="token number">2021</span> lost+found
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> media
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> mnt
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> opt
dr-xr-xr-x <span class="token number">133</span> root root    <span class="token number">0</span> Apr <span class="token number">26</span> 01:50 proc
dr-xr-x---   <span class="token number">2</span> root root <span class="token number">4096</span> Sep <span class="token number">15</span>  <span class="token number">2021</span> root
drwxr-xr-x  <span class="token number">11</span> root root <span class="token number">4096</span> Sep <span class="token number">15</span>  <span class="token number">2021</span> run
lrwxrwxrwx   <span class="token number">1</span> root root    <span class="token number">8</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> sbin -<span class="token operator">&gt;</span> usr/sbin
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Nov  <span class="token number">3</span>  <span class="token number">2020</span> srv
dr-xr-xr-x  <span class="token number">13</span> root root    <span class="token number">0</span> Apr <span class="token number">26</span> 01:50 sys
drwxrwxrwt   <span class="token number">7</span> root root <span class="token number">4096</span> Sep <span class="token number">15</span>  <span class="token number">2021</span> tmp
drwxr-xr-x  <span class="token number">12</span> root root <span class="token number">4096</span> Sep <span class="token number">15</span>  <span class="token number">2021</span> usr
drwxr-xr-x  <span class="token number">20</span> root root <span class="token number">4096</span> Sep <span class="token number">15</span>  <span class="token number">2021</span> var
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Apr <span class="token number">26</span> 01:47 volume01
drwxr-xr-x   <span class="token number">2</span> root root <span class="token number">4096</span> Apr <span class="token number">26</span> 01:47 volume02
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>首先在容器1中的volume01中添加文件</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-20-17-centos ~<span class="token punctuation">]</span><span class="token comment"># docker attach 494b049dd247</span>
<span class="token punctuation">[</span>root@494b049dd247 /<span class="token punctuation">]</span><span class="token comment"># cd volume01</span>
<span class="token punctuation">[</span>root@494b049dd247 volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token punctuation">[</span>root@494b049dd247 volume01<span class="token punctuation">]</span><span class="token comment"># touch docker01</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以看到容器2的文件也会添加上了</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@d3fe059ecdb9 /<span class="token punctuation">]</span><span class="token comment"># cd volume01</span>
<span class="token punctuation">[</span>root@d3fe059ecdb9 volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker01
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>反过来也是一样的，在容器2的volume01中添加文件，容器1也会相应添加上</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 把容器3与容器1建立挂载，然后在容器3中建立新文件</span>
<span class="token punctuation">[</span>root@VM-20-17-centos ~<span class="token punctuation">]</span><span class="token comment"># docker run -it --name docker03 --volumes-from docker01 jackson/centos:1.0</span>
<span class="token punctuation">[</span>root@e5a6f37b1f9b /<span class="token punctuation">]</span><span class="token comment"># cd volume01</span>
<span class="token punctuation">[</span>root@e5a6f37b1f9b volume01<span class="token punctuation">]</span><span class="token comment"># touch docker03</span>
<span class="token comment"># 容器1也有docker03这个文件</span>
<span class="token punctuation">[</span>root@494b049dd247 volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker01  docker02  docker03
<span class="token comment"># 容器2也有docker03这个文件</span>
<span class="token punctuation">[</span>root@d3fe059ecdb9 volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker01  docker02  docker03
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 把容器1删掉</span>
<span class="token punctuation">[</span>root@VM-20-17-centos ~<span class="token punctuation">]</span><span class="token comment"># docker rm -f 494b049dd247</span>
494b049dd247
<span class="token comment"># 容器2中的文件依旧在</span>
<span class="token punctuation">[</span>root@d3fe059ecdb9 volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker01  docker02  docker03
<span class="token comment"># 容器3中的文件依旧在</span>
<span class="token punctuation">[</span>root@e5a6f37b1f9b volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker01  docker02  docker03
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 可以理解为三个容器都共用了宿主机中的匿名数据卷中的文件，把宿主机上的文件删了，两个容器里面的文件也会跟着丢失</span>
<span class="token punctuation">[</span>root@VM-20-17-centos volumes<span class="token punctuation">]</span><span class="token comment"># ls</span>
0736e4097e5bb9b62b24e5f51088b37cf8271df9edd4f8ff1c8f3284fce72983  backingFsBlockDev                                                 juming-nginx
240e74fe33512e3182a5224fdc1013d753f6f77c81714781826c8d00ae71cc68  df748d8c94d65e44af403da44db9c4fbcdae4c55e34d5c3ce57d6a6a7eca994e  metadata.db
91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471  ebc728173eae10e435811c111272f5f5a0c8bc8b365065b63a75a0660efd3668
<span class="token punctuation">[</span>root@VM-20-17-centos volumes<span class="token punctuation">]</span><span class="token comment"># cd 91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471/</span>
<span class="token punctuation">[</span>root@VM-20-17-centos 91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471<span class="token punctuation">]</span><span class="token comment"># ls</span>
_data
<span class="token punctuation">[</span>root@VM-20-17-centos 91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471<span class="token punctuation">]</span><span class="token comment"># cd _data/</span>
<span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker01  docker02  docker03
<span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># rm -r docker01</span>
rm: remove regular empty <span class="token function">file</span> ‘docker01’? y

<span class="token comment"># 容器3中文件也跟着被删除了</span>
<span class="token punctuation">[</span>root@e5a6f37b1f9b volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker02  docker03
<span class="token comment"># 容器2也是一样</span>
<span class="token punctuation">[</span>root@d3fe059ecdb9 volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker02  docker03
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code> <span class="token comment"># 查看容器3和容器2的挂载目录，可以发现volume01挂载的都是主机中的同一个目录</span>
 <span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># docker inspect e5a6f37b1f9b   #查看容器3的挂载目录</span>

 <span class="token string">&quot;Mounts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume&quot;</span>,
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471&quot;</span>,
                <span class="token string">&quot;Source&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471/_data&quot;</span>,
                <span class="token string">&quot;Destination&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume01&quot;</span>,
                <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
                <span class="token string">&quot;Mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                <span class="token string">&quot;RW&quot;</span><span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;Propagation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume&quot;</span>,
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;df748d8c94d65e44af403da44db9c4fbcdae4c55e34d5c3ce57d6a6a7eca994e&quot;</span>,
                <span class="token string">&quot;Source&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/df748d8c94d65e44af403da44db9c4fbcdae4c55e34d5c3ce57d6a6a7eca994e/_data&quot;</span>,
                <span class="token string">&quot;Destination&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume02&quot;</span>,
                <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
                <span class="token string">&quot;Mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                <span class="token string">&quot;RW&quot;</span><span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;Propagation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,

<span class="token comment"># 查看容器2的挂载目录</span>
<span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># docker inspect d3fe059ecdb9</span>
  <span class="token string">&quot;Mounts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume&quot;</span>,
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;df748d8c94d65e44af403da44db9c4fbcdae4c55e34d5c3ce57d6a6a7eca994e&quot;</span>,
                <span class="token string">&quot;Source&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/df748d8c94d65e44af403da44db9c4fbcdae4c55e34d5c3ce57d6a6a7eca994e/_data&quot;</span>,
                <span class="token string">&quot;Destination&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume02&quot;</span>,
                <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
                <span class="token string">&quot;Mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                <span class="token string">&quot;RW&quot;</span><span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;Propagation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token punctuation">{</span>
                <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume&quot;</span>,
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471&quot;</span>,
                <span class="token string">&quot;Source&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/volumes/91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471/_data&quot;</span>,
                <span class="token string">&quot;Destination&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;volume01&quot;</span>,
                <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
                <span class="token string">&quot;Mode&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                <span class="token string">&quot;RW&quot;</span><span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;Propagation&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 在主机中新增文件</span>
root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># cd /var/lib/docker/volumes/91d3af6b1c1d35b58661ce6d5a3dfed2a251391b24b608e8568bb8fad0c59471/_data</span>
<span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker02  docker03
<span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># touch zhuji</span>
<span class="token comment"># 可以看到容器3也对应添加了文件</span>
<span class="token punctuation">[</span>root@VM-20-17-centos ~<span class="token punctuation">]</span><span class="token comment"># docker attach e5a6f37b1f9b</span>
<span class="token punctuation">[</span>root@e5a6f37b1f9b volume01<span class="token punctuation">]</span><span class="token comment"># ls</span>
docker02  docker03  zhuji
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下面同步两个MySQL的数据库和配置文件，与上面的操作相同，首先建立数据卷，然后给另一个MySQL容器建立容器数据卷挂载，两个mysql不要映射到主机的同一个端口，要映射两个不同的主机端口，否则会冲突。示例如下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 6603:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7</span>
<span class="token punctuation">[</span>root@VM-20-17-centos _data<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 6604:3306 -e MYSQL_ROOT_PASSWORD=123456 --name mysql02 --volumes-from mysql01 mysql:5.7</span>

小结：**容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用为止。但是一旦持久化到了本地，这个时候，本地的数据是不会删除的。**
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a> Dockerfile</h2><h3 id="dockerfile-介绍" tabindex="-1"><a class="header-anchor" href="#dockerfile-介绍" aria-hidden="true">#</a> Dockerfile 介绍</h3><p>dockerfile 是用来构建docker镜像的文件！命令参数脚本 构建步骤</p><ol><li>编写一个 dockerfile文件</li><li>docker build 构建成为一个镜像</li><li>docker run 运行镜像</li><li>docker push 发布镜像(DockerHub、阿里云镜像仓库！)</li></ol><p>官方的镜像： <img src="/images/md_images/docker/centos官方镜像.png" alt="centos官方镜像"></p><p>点进去就会到github地址： <img src="/images/md_images/docker/centos官方github地址.png" alt="centos官方github地址"></p><h3 id="dockerfile构建过程" tabindex="-1"><a class="header-anchor" href="#dockerfile构建过程" aria-hidden="true">#</a> Dockerfile构建过程</h3><p><strong>基础知识</strong></p><ol><li>每个保留关键字(指令) 都必须是大写字母</li><li>执行从上到下顺序执行</li><li>&#39;#&#39; 表示注释</li><li>每一个指令都会创建提交一个新的镜像层，并提交</li></ol><p><img src="/images/md_images/docker/docker层级示意图.png" alt="docker层级示意图"></p><p>dockerfile是面向开发的，需要发布项目部署到docker上，就需要编写dockerfile文件。 Docker镜像逐渐成为企业交付的标准，必须要掌握！ Dockerfile:构建文件，定义了一切步骤。 DockerImages：通过Dockerfile 构建生成的镜像，最终发布和运行。 Docker容器：容器就是镜像运行起来提供服务的。</p><h3 id="dockerfile的指令" tabindex="-1"><a class="header-anchor" href="#dockerfile的指令" aria-hidden="true">#</a> DockerFile的指令</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>FROM        <span class="token comment"># 基础镜像，一切从这里开始镜像</span>
MAINTAINER  <span class="token comment"># 镜像是谁写的，姓名+邮箱</span>
RUN         <span class="token comment"># 镜像构建的时候需要运行的命令</span>
ADD         <span class="token comment"># 拷贝本机文件或者远程文件到镜像内</span>
WORKDIR     <span class="token comment"># 镜像的工作目录</span>
VOLUME      <span class="token comment"># 挂载的目录</span>
EXPOSE      <span class="token comment"># 暴露的端口，保留端口配置</span>
CMD         <span class="token comment"># 指定这个容器启动的时候要运行的命令, 如果有多个CMD，都会执行但是只有最后一个会生效</span>
ENTRYPOINT  <span class="token comment"># 指定这个容器启动的时候要运行的命令,可以追加命令</span>
ONBUILD     <span class="token comment"># 当构建一个被继承 DockerFile 这个时候就会运行 ONBULID 的指令，触发指令。（ONBUILD 是一个特殊的指令，它后面跟的是其它指令，比如 RUN, COPY 等，而这些指令，在当前镜像构建时并不会被执行。只有当以当前镜像为基础镜像，去构建下一级镜像的时候才会被执行。）</span>
CORY        <span class="token comment"># 类似ADD，将文件拷贝到镜像中</span>
ENV         <span class="token comment"># 构建的时候设置环境变量</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/images/md_images/docker/Dockerfile命令图示.png" alt="Dockerfile命令示意图"></p><h3 id="实战测试" tabindex="-1"><a class="header-anchor" href="#实战测试" aria-hidden="true">#</a> 实战测试</h3><div class="custom-container tip"><p class="custom-container-title">创建自己的centos</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 1.编写Dockerfile文件</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># cat dockerfile-centos</span>
FROM centos:7
MAINTAINER xiaobo<span class="token operator">&lt;</span><span class="token number">1455148738</span>@qq.com<span class="token operator">&gt;</span>

ENV MYPATH /usr/local
WORKDIR <span class="token variable">$MYPATH</span>

RUN yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">vim</span>
RUN yum <span class="token parameter variable">-y</span> <span class="token function">install</span> net-tools

EXPOSE <span class="token number">80</span>

CMD <span class="token builtin class-name">echo</span> <span class="token variable">$MYPATH</span>
CMD <span class="token builtin class-name">echo</span> <span class="token string">&quot;---end---&quot;</span>
CMD /bin/bash

<span class="token comment">#2.通过dockerfile文件构建镜像</span>
<span class="token comment"># 命令 docker build -f dockerfile文件路径 -t 镜像名:[TAG] .</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker build -f dockerfile-centos -t xiaobo_centos:0.1 .</span>

<span class="token comment">#3.测试运行</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it 33fe59c89486</span>
<span class="token punctuation">[</span>root@b8b4a22a076a local<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  etc  games  include  lib  lib64  libexec  sbin  share  src
<span class="token punctuation">[</span>root@b8b4a22a076a local<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/usr/local
<span class="token comment"># ifconfig命令都是可以使用了。</span>
<span class="token punctuation">[</span>root@b8b4a22a076a local<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.2  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.17</span>.255.255
        ether 02:42:ac:11:00:02  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">8</span>  bytes <span class="token number">656</span> <span class="token punctuation">(</span><span class="token number">656.0</span> B<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">0</span>  bytes <span class="token number">0</span> <span class="token punctuation">(</span><span class="token number">0.0</span> B<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">CMD和ENTRYPOINT 区别</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>CMD         <span class="token comment"># 指定这个容器启动的时候要运行的命令, 如果有多个CMD，都会执行但是只有最后一个会生效</span>
ENTRYPOINT  <span class="token comment"># 指定这个容器启动的时候要运行的命令,可以追加命令</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>测试cmd</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># vim dockerfile-cmd-test</span>
    FROM centos:7
    CMD <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>
<span class="token comment">#构建镜像</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker build -f dockerfile-cmd-test -t centos-cmd-test .</span>
Successfully built 309b83a08e0d
Successfully tagged centos-cmd-test:latest
<span class="token comment">#运行镜像 执行了 CMD [&quot;ls&quot;,&quot;-a&quot;]</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it 309b83a08e0d</span>
<span class="token builtin class-name">.</span>   .dockerenv         bin  etc   lib    media  opt   root  sbin  sys  usr
<span class="token punctuation">..</span>  anaconda-post.log  dev  home  lib64  mnt    proc  run   srv   tmp  var1


<span class="token comment">#想要追加一个 -l 但是会报错，因为-l不是一个完整的命令，应该是 ls -l</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it 309b83a08e0d -l</span>
docker: Error response from daemon: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: exec: <span class="token string">&quot;-l&quot;</span><span class="token builtin class-name">:</span> executable <span class="token function">file</span> not found <span class="token keyword">in</span> <span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span> unknown.
ERRO<span class="token punctuation">[</span>0000<span class="token punctuation">]</span> error waiting <span class="token keyword">for</span> container: context canceled

<span class="token comment">#直接追加 ls -l，会发现ls -a 不会执行了，因为ls -l 替换了 ls -a了</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it 309b83a08e0d ls -l</span>
total <span class="token number">56</span>
-rw-r--r--   <span class="token number">1</span> root root <span class="token number">12114</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> anaconda-post.log
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">7</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> bin -<span class="token operator">&gt;</span> usr/bin
drwxr-xr-x   <span class="token number">5</span> root root   <span class="token number">360</span> Dec  <span class="token number">8</span> 05:48 dev
drwxr-xr-x   <span class="token number">1</span> root root  <span class="token number">4096</span> Dec  <span class="token number">8</span> 05:48 etc
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> home
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">7</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> lib -<span class="token operator">&gt;</span> usr/lib
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">9</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> lib64 -<span class="token operator">&gt;</span> usr/lib64
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> media
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> mnt
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> opt
dr-xr-xr-x <span class="token number">128</span> root root     <span class="token number">0</span> Dec  <span class="token number">8</span> 05:48 proc
dr-xr-x---   <span class="token number">2</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> root
drwxr-xr-x  <span class="token number">11</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> run
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">8</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> sbin -<span class="token operator">&gt;</span> usr/sbin
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> srv
dr-xr-xr-x  <span class="token number">13</span> root root     <span class="token number">0</span> Dec  <span class="token number">7</span> 07:41 sys
drwxrwxrwt   <span class="token number">7</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> tmp
drwxr-xr-x  <span class="token number">13</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> usr
drwxr-xr-x  <span class="token number">18</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> var
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试ENTORYPOINT</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># vim dockerfile-entorypoint-test</span>
FROM centos:7
ENTORYPOINT <span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span>,<span class="token string">&quot;-a&quot;</span><span class="token punctuation">]</span>
<span class="token comment">#构建镜像</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker build -f dockerfile-entrypoint-test -t centos-entrypoint-test .</span>
Successfully built d82997ba0ac0
Successfully tagged centos-entrypoint-test:latest
<span class="token comment">#运行命令 会执行 ls -a命令</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it d82997ba0ac0</span>
<span class="token builtin class-name">.</span>   .dockerenv         bin  etc   lib    media  opt   root  sbin  sys  usr
<span class="token punctuation">..</span>  anaconda-post.log  dev  home  lib64  mnt    proc  run   srv   tmp  var

<span class="token comment">#再次运行，直接增加 -l ，会发现执行了 ls-al 命令；是在原有的命令上增加了而不是替换</span>
<span class="token punctuation">[</span>root@wb dockerfile<span class="token punctuation">]</span><span class="token comment"># docker run -it d82997ba0ac0 -l</span>
total <span class="token number">64</span>
drwxr-xr-x   <span class="token number">1</span> root root  <span class="token number">4096</span> Dec  <span class="token number">8</span> 05:55 <span class="token builtin class-name">.</span>
drwxr-xr-x   <span class="token number">1</span> root root  <span class="token number">4096</span> Dec  <span class="token number">8</span> 05:55 <span class="token punctuation">..</span>
-rwxr-xr-x   <span class="token number">1</span> root root     <span class="token number">0</span> Dec  <span class="token number">8</span> 05:55 .dockerenv
-rw-r--r--   <span class="token number">1</span> root root <span class="token number">12114</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> anaconda-post.log
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">7</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> bin -<span class="token operator">&gt;</span> usr/bin
drwxr-xr-x   <span class="token number">5</span> root root   <span class="token number">360</span> Dec  <span class="token number">8</span> 05:55 dev
drwxr-xr-x   <span class="token number">1</span> root root  <span class="token number">4096</span> Dec  <span class="token number">8</span> 05:55 etc
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> home
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">7</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> lib -<span class="token operator">&gt;</span> usr/lib
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">9</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> lib64 -<span class="token operator">&gt;</span> usr/lib64
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> media
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> mnt
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> opt
dr-xr-xr-x <span class="token number">128</span> root root     <span class="token number">0</span> Dec  <span class="token number">8</span> 05:55 proc
dr-xr-x---   <span class="token number">2</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> root
drwxr-xr-x  <span class="token number">11</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> run
lrwxrwxrwx   <span class="token number">1</span> root root     <span class="token number">8</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> sbin -<span class="token operator">&gt;</span> usr/sbin
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span> Apr <span class="token number">11</span>  <span class="token number">2018</span> srv
dr-xr-xr-x  <span class="token number">13</span> root root     <span class="token number">0</span> Dec  <span class="token number">7</span> 07:41 sys
drwxrwxrwt   <span class="token number">7</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> tmp
drwxr-xr-x  <span class="token number">13</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> usr
drwxr-xr-x  <span class="token number">18</span> root root  <span class="token number">4096</span> Nov <span class="token number">13</span>  <span class="token number">2020</span> var
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="制作tomcat镜像" tabindex="-1"><a class="header-anchor" href="#制作tomcat镜像" aria-hidden="true">#</a> 制作Tomcat镜像</h3><ol><li>准备镜像文件 tomcat压缩包，jdk压缩包</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb tomcat<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/home/xiaobo/build/tomcat
<span class="token punctuation">[</span>root@wb tomcat<span class="token punctuation">]</span><span class="token comment"># ls</span>
apache-tomcat-8.5.81-windows-x86.zip  Dockerfile  jdk-8u321-linux-x64.tar.gz  readme.md

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>编写dockerfile文件</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>FROM centos:7
MAINTAINET xiaobo<span class="token operator">&lt;</span><span class="token number">1455148738</span>@qq.com<span class="token operator">&gt;</span>

COPY readme.md /usr/local/readme.md

ADD jdk-8u321-linux-x64.tar.gz /usr/local
ADD apache-tomcat-8.5.81-windows-x86.zip /usr/local

RUN yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">vim</span>

ENV MYPATH usr/local
WORKDIR <span class="token variable">$MYPATH</span>

ENV JAVA_HOME /usr/local/jdk1.8.0_321
ENV CLASSPATH <span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar
ENV CATALINA_HOME /usr/local/apache-tomcat-8.5.81
ENV CATALINA_BASH /usr/local/apache-tomcat-8.5.81
ENV <span class="token environment constant">PATH</span> <span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$CATALINA_HOME</span>/lib:<span class="token variable">$CATALINA_HOME</span>/bin

EXPOSE <span class="token number">8080</span>

CMD /usr/local/apache-tomcat-8.5.81/bin/startup.sh <span class="token operator">&amp;&amp;</span> <span class="token function">tail</span> <span class="token parameter variable">-f</span> /usr/local/apache-tomcat-8.5.81/bin/logs/catalina.out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>构建镜像,文件名使用官方命名：Dockerfile ，build的时候会默认寻找当前目录下的文件，不需要使用 -f 参数指定</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#docker build -t xiaobo_tomcat .</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>启动镜像</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#第一个-v 是将内部的test目录挂载到外部的/home/xiaobo/build/tomcat/test</span>
<span class="token comment">#第二个-v 是将内部的logs日志挂载到外部的/home/xiaobo/build/tomcat/tomcatlogs</span>
<span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">-p</span> <span class="token number">8091</span>:8080 <span class="token parameter variable">--name</span> xiaobo_tomcat_01 <span class="token parameter variable">-v</span> /home/xiaobo/build/tomcat/test:/usr/local/apache-tomcat-8.5.84/webapps/test <span class="token parameter variable">-v</span> /home/xiaobo/build/tomcat/tomcatlogs:/usr/local/apache-tomcat-8.5.84/logs xiaobo_tomcat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5.访问测试<br> ip:8901<br> 6.发布项目(由于做了卷挂载，我们直接在本地编写项目就可以发布了) 写一个简单的html页面供测试</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&lt;</span><span class="token operator">!</span>CTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>meta <span class="token assign-left variable">charset</span><span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>xiaobo测试<span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>测试测试<span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我的第一个段落。<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/images/md_images/docker/docker_tomcat_测试.png" alt=""></p><h3 id="发布自己的镜像" tabindex="-1"><a class="header-anchor" href="#发布自己的镜像" aria-hidden="true">#</a> 发布自己的镜像</h3><div class="custom-container tip"><p class="custom-container-title">发布镜像到docker hub</p></div><ol><li>地址：https://hub.docker.com/ 注册自己的账号</li><li>在我们的服务器上提交自己的镜像</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## 首先登录到 docker hub</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker login --help</span>
Usage:  <span class="token function">docker</span> login <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token punctuation">[</span>SERVER<span class="token punctuation">]</span>
Log <span class="token keyword">in</span> to a Docker registry.
If no server is specified, the default is defined by the daemon.
Options:
  -p, <span class="token parameter variable">--password</span> string   Password
      --password-stdin    Take the password from stdin
  -u, <span class="token parameter variable">--username</span> string   Username

<span class="token comment">##登录</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker login -u XXX</span>
Password:

Login Succeeded
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们需要在docker hub上创建一个仓库；类似于github一样</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## docker tag [镜像名/镜像id]:[tag-版本号] 用户名/仓库名 </span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker tag xiaobo_tomcat:latest xiaobozi/xiaobo_tomcat</span>

<span class="token comment">## push 到hub--</span>
<span class="token punctuation">[</span>root@wb /<span class="token punctuation">]</span><span class="token comment"># docker push xiaobozi/xiaobo_tomcat:1.0</span>
Using default tag: latest
The push refers to repository <span class="token punctuation">[</span>docker.io/xiaobozi/xiaobo_tomcat<span class="token punctuation">]</span>
aea3f70a00f9: Pushed
eca0904e5d6c: Pushed
af1036e3ab54: Pushed
0f6dce7a605a: Pushed
174f56854903: Mounted from library/centos
latest: digest: sha256:cc6cc2bb52728ba376d1c4a69fa19eecd6552904c4ce48db1f31d177e3e6bfa5 size: <span class="token number">1373</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="小结-1" tabindex="-1"><a class="header-anchor" href="#小结-1" aria-hidden="true">#</a> 小结</h3><p><img src="/images/md_images/docker/docker流程图.webp" alt="docker流程图"></p><h2 id="docker-网络" tabindex="-1"><a class="header-anchor" href="#docker-网络" aria-hidden="true">#</a> Docker 网络</h2><h3 id="理解docker0" tabindex="-1"><a class="header-anchor" href="#理解docker0" aria-hidden="true">#</a> 理解Docker0</h3><p><img src="/images/md_images/docker/ip-addr命令.png" alt="ip-addr命令"></p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>问题：docker 是如何处理容器网络访问的？</p></div><p><strong>测试：</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">## 启动一个tomcat</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8901</span>:8080 <span class="token parameter variable">--name</span> tomcat01 tomcat

<span class="token comment">## 进入容器</span>

<span class="token comment">## 查看容器内部的网络地址；可以发现容器启动的时候得到了一个 eth0@if95 ip地址，这是docker分配的</span>
<span class="token comment"># 如果没有ip addr命令，使用以下命令安装 apt update &amp;&amp; apt install -y iproute2</span>

root@68c639186cb2:/<span class="token comment"># ip addr</span>
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
<span class="token number">94</span>: eth0@if95: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1500</span> qdisc noqueue state UP group default
    link/ether 02:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">0</span>
    inet <span class="token number">172.17</span>.0.2/16 brd <span class="token number">172.17</span>.255.255 scope global eth0
       valid_lft forever preferred_lft forever
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">原理</p></div><ol><li>每启动一个docker容器，docker就会给docker容器分配一个ip,只要安装了docker，就会有一个网卡docker0；使用的技术：桥接模式，evth-pair 技术</li></ol><p>再次在linux上查询ip addr 会发现多了一个网卡</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># ip addr</span>
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope <span class="token function">host</span>
       valid_lft forever preferred_lft forever
<span class="token number">2</span>: eth0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1500</span> qdisc mq state UP group default qlen <span class="token number">1000</span>
    link/ether <span class="token number">52</span>:54:00:29:a0:dc brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">10.0</span>.16.10/22 brd <span class="token number">10.0</span>.19.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::5054:ff:fe29:a0dc/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
<span class="token number">3</span>: docker0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1500</span> qdisc noqueue state UP group default
    link/ether 02:42:3b:02:31:b2 brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">172.17</span>.0.1/16 brd <span class="token number">172.17</span>.255.255 scope global docker0
       valid_lft forever preferred_lft forever
    inet6 fe80::42:3bff:fe02:31b2/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
<span class="token number">95</span>: veth0fd7843@if94: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1500</span> qdisc noqueue master docker0 state UP group default
    link/ether 1e:41:38:dd:68:75 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">0</span>
    inet6 fe80::1c41:38ff:fedd:6875/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 发现容器带来的网卡都是一对一对的</span>
<span class="token comment"># evth-pair 就是一对的虚拟设备接口，它们都是成对出现的，一段连着协议，一段彼此相连</span>
<span class="token comment"># 正因为有这个特性，evth-pair 充当一个桥梁，连接各种虚拟网络设备</span>
<span class="token comment"># OpenStac ，Docker 容器之间的连接，OVS的连接，都是使用 evth-pair技术</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>两个tomcat互ping 通的原理 <img src="/images/md_images/docker/Docker网络容器互ping原理.png" alt="Docker网络容器互ping原理"></li></ol><p>结论： tomcat01 和 tomcat02 是公用一个docker0(路由器)；tomcat01 ping tomcat02地址时，会先访问docker0，然后docker0再去找tomcat02的。<br> 所有容器不指定网络的情况下，都是docker0路由的，Docker会给容器分配一个默认可用的IP。</p><div class="custom-container tip"><p class="custom-container-title">小结</p></div><p><img src="/images/md_images/docker/docker0网络通信图.png" alt="docker0网络通信图"></p><p>Docker所有的网络接口都是虚拟的，虚拟的转发的效率高。<br> 只要容器删除，对应的一对网桥也会删除掉。</p><h3 id="自定义网络" tabindex="-1"><a class="header-anchor" href="#自定义网络" aria-hidden="true">#</a> 自定义网络</h3><p>查看docker所有的网络</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker network ls</span>
NETWORK ID     NAME      DRIVER    SCOPE
eec3bc1d8762   bridge    bridge    <span class="token builtin class-name">local</span>
16bbdf349756   <span class="token function">host</span>      <span class="token function">host</span>      <span class="token builtin class-name">local</span>
a92bda1f274a   none      null      <span class="token builtin class-name">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>网络模式</strong></p><ul><li>bridge：桥接模式(默认)</li><li>none ：不配置网络</li><li>host ：和宿主机共享网络</li></ul><div class="custom-container tip"><p class="custom-container-title">自定义网络</p></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># --driver bridge 桥接模式</span>
<span class="token comment"># --subnet 10.0.0.0/16  子网地址</span>
<span class="token comment"># --gateway 10.0.0.1 网关地址</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker network create --driver bridge --subnet 10.0.0.0/16 --gateway 10.0.0.1 mynet</span>
997ed6784894d75bbbfeaf16cf990e2c7f6311ee4142f515ed3eab32f947bd8a
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker network ls</span>
NETWORK ID     NAME      DRIVER    SCOPE
eec3bc1d8762   bridge    bridge    <span class="token builtin class-name">local</span>
16bbdf349756   <span class="token function">host</span>      <span class="token function">host</span>      <span class="token builtin class-name">local</span>
997ed6784894   mynet     bridge    <span class="token builtin class-name">local</span>    <span class="token comment">#自定义的网络</span>
a92bda1f274a   none      null      <span class="token builtin class-name">local</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看创建的网络</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker network inspect mynet</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mynet&quot;</span>,
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;997ed6784894d75bbbfeaf16cf990e2c7f6311ee4142f515ed3eab32f947bd8a&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2023-01-05T15:31:06.594038821+08:00&quot;</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;EnableIPv6&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;IPAM&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;Subnet&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10.0.0.0/16&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10.0.0.1&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Internal&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Attachable&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Ingress&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ConfigFrom&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Network&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ConfigOnly&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Containers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动两个tomcat并使用我们创建的网络</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8901:8080 --name tomcar_net01 --net mynet tomcat</span>
57ed09f0dfce71f5e46ac5a31a2513dabb0d1ecb88b987f1e71590c5b98b81a1
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8902:8080 --name tomcar_net02 --net mynet tomcat</span>
ce11859c1198bdd96386bdf0a17c0293a88246862dc4eed9e92c9795c7d3a68b
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                                       NAMES
ce11859c1198   tomcat    <span class="token string">&quot;catalina.sh run&quot;</span>   <span class="token number">6</span> seconds ago    Up <span class="token number">5</span> seconds    <span class="token number">0.0</span>.0.0:8902-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp, :::8902-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp   tomcar_net02
57ed09f0dfce   tomcat    <span class="token string">&quot;catalina.sh run&quot;</span>   <span class="token number">55</span> seconds ago   Up <span class="token number">53</span> seconds   <span class="token number">0.0</span>.0.0:8901-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp, :::8901-<span class="token operator">&gt;</span><span class="token number">8080</span>/tcp   tomcar_net01

<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker network inspect mynet</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mynet&quot;</span>,
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;997ed6784894d75bbbfeaf16cf990e2c7f6311ee4142f515ed3eab32f947bd8a&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2023-01-05T15:31:06.594038821+08:00&quot;</span>,
        <span class="token string">&quot;Scope&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;local&quot;</span>,
        <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;bridge&quot;</span>,
        <span class="token string">&quot;EnableIPv6&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;IPAM&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Driver&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;default&quot;</span>,
            <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
            <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token string">&quot;Subnet&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10.0.0.0/16&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10.0.0.1&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Internal&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Attachable&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Ingress&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ConfigFrom&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Network&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ConfigOnly&quot;</span><span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;Containers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;57ed09f0dfce71f5e46ac5a31a2513dabb0d1ecb88b987f1e71590c5b98b81a1&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tomcar_net01&quot;</span>,
                <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;8a9155fa1ab5f1aaa567de5a035421e76057dd752b83f84e589c383728d2f849&quot;</span>,
                <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:0a:00:00:02&quot;</span>,
                <span class="token string">&quot;IPv4Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10.0.0.2/16&quot;</span>,
                <span class="token string">&quot;IPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;ce11859c1198bdd96386bdf0a17c0293a88246862dc4eed9e92c9795c7d3a68b&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;tomcar_net02&quot;</span>,
                <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;3ca6add087dec888ddcb906076daf8cbc1f6a812e31c6b0fc95f5b76bbf5e482&quot;</span>,
                <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:0a:00:00:03&quot;</span>,
                <span class="token string">&quot;IPv4Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;10.0.0.3/16&quot;</span>,
                <span class="token string">&quot;IPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Options&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>,
        <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment"># 测试通过ping ip和容器名称</span>
<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcar_net01 ping 10.0.0.3</span>
PING <span class="token number">10.0</span>.0.3 <span class="token punctuation">(</span><span class="token number">10.0</span>.0.3<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from <span class="token number">10.0</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.066</span> ms
<span class="token number">64</span> bytes from <span class="token number">10.0</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.060</span> ms
<span class="token number">64</span> bytes from <span class="token number">10.0</span>.0.3: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.056</span> ms

<span class="token punctuation">[</span>root@wb ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcar_net01 ping tomcar_net02</span>
PING tomcar_net02 <span class="token punctuation">(</span><span class="token number">10.0</span>.0.3<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.
<span class="token number">64</span> bytes from tomcar_net02.mynet <span class="token punctuation">(</span><span class="token number">10.0</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.047</span> ms
<span class="token number">64</span> bytes from tomcar_net02.mynet <span class="token punctuation">(</span><span class="token number">10.0</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.057</span> ms
<span class="token number">64</span> bytes from tomcar_net02.mynet <span class="token punctuation">(</span><span class="token number">10.0</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.056</span> ms
<span class="token number">64</span> bytes from tomcar_net02.mynet <span class="token punctuation">(</span><span class="token number">10.0</span>.0.3<span class="token punctuation">)</span>: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">4</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.059</span> ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自定义的网络Docker会帮助维护好对应的关系。</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: wangbo_0829@163.com">wangbo</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: wangbo_0829@163.com">王博</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.5927a741.js" defer></script>
  </body>
</html>
